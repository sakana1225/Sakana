<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<meta name="apple-mobile-web-app-capable" content="yes">
<meta name="apple-mobile-web-app-status-bar-style" content="white-translucent">
<meta name="theme-color" content="rgba(0,0,0,0)">
<style>
html, body {
    height: 100vh;
    height: -webkit-fill-available;
    margin: 0;
    padding: 0;
    background: transparent !important;
    -webkit-touch-callout: none;
}
.iphone {
    height: 100vh;
    height: -webkit-fill-available;
}
.lock-screen,
.home-screen {
    padding-top: env(safe-area-inset-top);
    background-size: cover !important;
    background-position: center center !important;
}
.standalone-mode .status-bar {
    opacity: 0 !important;
    pointer-events: none !important;
}
.status-bar {
    background: transparent !important;
}
</style>

    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    
    <!-- Ê∑ªÂä†Âà∞‰∏ªÂ±èÂπïÂÖ®Â±èËÆæÁΩÆ -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent">
    <meta name="apple-mobile-web-app-title" content="Sakana">
    <meta name="mobile-web-app-capable" content="yes">
    <meta name="theme-color" content="#000000">
    <meta name="msapplication-TileColor" content="#000000">
    <meta name="msapplication-tap-highlight" content="no">
    <meta name="application-name" content="SakanaÂ∞èÊâãÊú∫">
    <meta name="format-detection" content="telephone=no">
    <meta name="HandheldFriendly" content="true">
    
    <!-- iOSÂõæÊ†á -->
    <link rel="apple-touch-icon" href="https://tc.z.wiki/autoupload/fr/oBJ5XpnsM7iywgzz-QhaqM4ANCxnESKetcRdPZbn-GGyl5f0KlZfm6UsKj-HyTuv/20251030/r4xZ/1079X2277/IMG_1212.jpeg">
    <link rel="apple-touch-icon" sizes="152x152" href="https://tc.z.wiki/autoupload/fr/oBJ5XpnsM7iywgzz-QhaqM4ANCxnESKetcRdPZbn-GGyl5f0KlZfm6UsKj-HyTuv/20251030/r4xZ/1079X2277/IMG_1212.jpeg">
    <link rel="apple-touch-icon" sizes="180x180" href="https://tc.z.wiki/autoupload/fr/oBJ5XpnsM7iywgzz-QhaqM4ANCxnESKetcRdPZbn-GGyl5f0KlZfm6UsKj-HyTuv/20251030/r4xZ/1079X2277/IMG_1212.jpeg">
    <link rel="apple-touch-icon" sizes="167x167" href="https://tc.z.wiki/autoupload/fr/oBJ5XpnsM7iywgzz-QhaqM4ANCxnESKetcRdPZbn-GGyl5f0KlZfm6UsKj-HyTuv/20251030/r4xZ/1079X2277/IMG_1212.jpeg">
    
    <!-- Web App Manifest -->
    <link rel="manifest" href="data:application/manifest+json,%7B%22name%22%3A%22Sakana%E5%B0%8F%E6%89%8B%E6%9C%BA%22%2C%22short_name%22%3A%22Sakana%E6%89%8B%E6%9C%BA%22%2C%22description%22%3A%22%E4%B8%80%E4%B8%AA%E4%BB%BFiPhone%E7%9A%84%E5%BE%AE%E4%BF%A1%E7%95%8C%E9%9D%A2%E6%A8%A1%E6%8B%9F%E5%99%A8%22%2C%22start_url%22%3A%22%2F%22%2C%22display%22%3A%22fullscreen%22%2C%22theme_color%22%3A%22%23000000%22%2C%22background_color%22%3A%22%23000000%22%2C%22orientation%22%3A%22portrait%22%2C%22scope%22%3A%22%2F%22%2C%22icons%22%3A%5B%7B%22src%22%3A%22https%3A%2F%2Ftc.z.wiki%2Fautoupload%2Ffr%2FoBJ5XpnsM7iywgzz-QhaqM4ANCxnESKetcRdPZbn-GGyl5f0KlZfm6UsKj-HyTuv%2F20251030%2Fr4xZ%2F1079X2277%2FIMG_1212.jpeg%22%2C%22sizes%22%3A%22192x192%22%2C%22type%22%3A%22image%2Fjpeg%22%7D%2C%7B%22src%22%3A%22https%3A%2F%2Ftc.z.wiki%2Fautoupload%2Ffr%2FoBJ5XpnsM7iywgzz-QhaqM4ANCxnESKetcRdPZbn-GGyl5f0KlZfm6UsKj-HyTuv%2F20251030%2Fr4xZ%2F1079X2277%2FIMG_1212.jpeg%22%2C%22sizes%22%3A%22512x512%22%2C%22type%22%3A%22image%2Fjpeg%22%7D%5D%7D">
    
    <title>Sakana</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            margin: 0;
            padding: 0;
            overflow: hidden;
            background-color: #000;
            font-family: -apple-system, BlinkMacSystemFont, "Helvetica Neue", sans-serif;
            /* Á°Æ‰øùÂú®iOS‰∏äÂÖ®Â±è */
            height: 100vh;
            height: -webkit-fill-available;
        }
        .iphone {
            width: 100vw;
            height: 100vh;
            height: -webkit-fill-available;
            background-color: #111;
            border-radius: 0;
            padding: 0;
            box-shadow: none;
            position: relative;
            /* Á°Æ‰øùÂÖ®Â±èÊ®°Âºè‰∏ãÁöÑÂÆö‰Ωç */
            position: fixed;
            top: 0;
            left: 0;
            overflow: hidden;
        }
        .screen {
            width: 100%;
            height: 100%;
            background-color: #1a1a1a;
            border-radius: 0;
            overflow: hidden;
            position: relative;
            color: white;
            transition: background-color 0.5s ease;
        }
        .status-bar{opacity:0!important;pointer-events:none!important;}
        .wechat-status-bar{display:none!important;}
        .signal {
            display: flex;
            gap: 1.5px;
            align-items: flex-end;
            margin-right: 6px;
        }
        .signal-bar {
            background-color: #000; /* Êîπ‰∏∫ÈªëËâ≤ */
            border-radius: 1px;
        }
        .signal-bar:nth-child(1) {
            width: 3px;
            height: 4px;
        }
        .signal-bar:nth-child(2) {
            width: 3px;
            height: 7px;
        }
        .signal-bar:nth-child(3) {
            width: 3px;
            height: 10px;
        }
        .signal-bar:nth-child(4) {
            width: 3px;
            height: 13px;
        }
        .battery {
            display: flex;
            align-items: center;
        }
        .battery-outline {
            width: 18px;
            height: 9px;
            border: 1.2px solid #000; /* Êîπ‰∏∫ÈªëËâ≤ */
            border-radius: 1.5px;
            position: relative;
        }
        .battery-fill {
            position: absolute;
            top: 1px;
            left: 1px;
            width: 75%;
            height: 6px;
            background-color: #000; /* Êîπ‰∏∫ÈªëËâ≤ */
            border-radius: 0.5px;
        }
        .speaker {
            width: 80px;
            height: 8px;
            background-color: #333;
            border-radius: 4px;
            position: absolute;
            top: 25px;
            left: 50%;
            transform: translateX(-50%);
        }
        .lock-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            transition: transform 0.6s cubic-bezier(0.19, 1, 0.22, 1);
            display: flex;
            flex-direction: column;
            justify-content: flex-start;
            z-index: 3;
            background: url('https://tc.z.wiki/autoupload/fr/oBJ5XpnsM7iywgzz-QhaqM4ANCxnESKetcRdPZbn-GGyl5f0KlZfm6UsKj-HyTuv/20251030/r4xZ/1079X2277/IMG_1212.jpeg') center/cover no-repeat;
        }
        /* ÁßªÈô§ÈªëËâ≤ÁΩ©Ë°´ */
        .lock-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0); /* Êîπ‰∏∫ÈÄèÊòé */
            z-index: -1;
        }
        .lock-screen-content {
            text-align: center;
            padding-top: 120px;
        }
        .time {
            font-size: clamp(48px, 15vw, 72px);
            font-weight: 300;
            margin-top: 12px;
            color: #000; /* Êîπ‰∏∫ÈªëËâ≤ */
        }
        .date {
            font-size: clamp(16px, 4vw, 20px);
            opacity: 0.9;
            color: #000; /* Êîπ‰∏∫ÈªëËâ≤ */
        }
        .slide-to-unlock {
            position: absolute;
            bottom: 60px;
            left: 50%;
            transform: translateX(-50%);
            font-size: clamp(14px, 3vw, 16px);
            opacity: 0.8;
            display: flex;
            align-items: center;
            gap: 10px;
            cursor: grab;
            touch-action: pan-x;
            padding: 10px 20px;
            border-radius: 30px;
            z-index: 4;
            color: #000; /* Êîπ‰∏∫ÈªëËâ≤ */
        }
        .slide-icon {
            width: clamp(24px, 6vw, 32px);
            height: clamp(24px, 6vw, 32px);
            border: 1.5px solid #000; /* Êîπ‰∏∫ÈªëËâ≤ */
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: transform 0.3s ease;
        }
        .slide-icon::after {
            content: "";
            width: clamp(8px, 2vw, 12px);
            height: clamp(8px, 2vw, 12px);
            background-color: #000; /* Êîπ‰∏∫ÈªëËâ≤ */
            border-radius: 50%;
        }
        .home-screen {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('https://tc.z.wiki/autoupload/fr/oBJ5XpnsM7iywgzz-QhaqM4ANCxnESKetcRdPZbn-GGyl5f0KlZfm6UsKj-HyTuv/20251030/r4xZ/1079X2277/IMG_1212.jpeg') center/cover no-repeat;
            transform: translateX(100%);
            transition: transform 0.6s cubic-bezier(0.19, 1, 0.22, 1);
            padding-top: 70px;
            box-sizing: border-box;
            z-index: 2;
        }
        /* ÁßªÈô§ÈªëËâ≤ÁΩ©Ë°´ */
        .home-screen::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0); /* Êîπ‰∏∫ÈÄèÊòé */
            z-index: -1;
        }
        .app-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 15px;
            padding: 0 15px;
            height: calc(100% - 100px);
            overflow-y: auto;
        }
        .app-icon {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 8px;
            padding: 10px 0;
            cursor: pointer;
        }
        .app-icon-outer {
            width: clamp(50px, 15vw, 70px);
            height: clamp(50px, 15vw, 70px);
            background-color: #444;
            border-radius: 16px;
            display: flex;
            justify-content: center;
            align-items: center;
            font-size: clamp(24px, 6vw, 36px);
        }
        .wechat-icon {
            background-color: #07C160;
        }
        .app-name {
            font-size: clamp(11px, 2.5vw, 14px);
            opacity: 0.9;
            text-align: center;
            width: 100%;
            overflow: hidden;
            text-overflow: ellipsis;
            white-space: nowrap;
            color: #000; /* Êîπ‰∏∫ÈªëËâ≤ */
        }
        .wechat-page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #E5E5E5;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 5;
            display: flex;
            flex-direction: column;
        }
        .wechat-header {
            height: 50px;
            background-color: #07C160;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 15px;
            color: white;
            font-weight: 500;
            font-size: 18px;
            margin-top: 0;
    padding-top: env(safe-area-inset-top);
            position: relative;
        }
        .wechat-title {
            font-size: 18px;
            font-weight: 500;
        }
        .wechat-back-btn {
            position: absolute;
            left: 15px;
            font-size: 20px;
            cursor: pointer;
            color: white;
        }
        .wechat-header-icon {
            position: absolute;
            right: 15px;
            font-size: 22px;
            display: flex;
            gap: 20px;
        }
        #moments-page .moments-container,
        #me-page .me-container {
            margin-top: 0;
    padding-top: env(safe-area-inset-top);
        }
        #moments-page .moment-item:first-child {
            margin-top: 0;
        }
        #me-page .me-header {
            padding-top: 10px;
        }
        .wechat-bottom-nav {
            position: absolute;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 60px;
            background-color: white;
            display: flex;
            border-top: 1px solid #e1e1e1;
            z-index: 10;
        }
        .nav-item {
            flex: 1;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: all 0.3s ease;
        }
        .nav-item.active {
            color: #07C160;
        }
        .nav-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }
        .nav-text {
            font-size: 12px;
        }
        .wechat-content {
            flex: 1;
            position: relative;
            overflow: hidden;
            margin-bottom: 60px;
        }
        .content-page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            display: none;
            overflow-y: auto;
        }
        .content-page.active {
            display: block;
        }
        .wechat-chats {
            background-color: white;
        }
        /* Â∑¶ÊªëÂà†Èô§Áõ∏ÂÖ≥Ê†∑Âºè */
        .chat-item {
            display: flex;
            align-items: center;
            padding: 12px 15px;
            background-color: white;
            border-bottom: 1px solid #F5F5F5;
            position: relative;
            transition: all 0.3s ease;
            touch-action: pan-x;
            overflow: hidden;
        }

        .chat-item-content {
            display: flex;
            align-items: center;
            width: 100%;
            transition: transform 0.3s ease;
        }

        .delete-action {
            position: absolute;
            right: -80px;
            top: 0;
            height: 100%;
            width: 80px;
            background-color: #FF3B30;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 16px;
            font-weight: 500;
            cursor: pointer;
            transition: right 0.3s ease;
        }

        .chat-item.swiped .delete-action {
            right: 0;
        }

        .chat-item.swiped .chat-item-content {
            transform: translateX(-80px);
        }

        .chat-avatar {
            width: 45px;
            height: 45px;
            border-radius: 8px;
            background-color: #eee;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 20px;
            margin-right: 12px;
        }
        .chat-info {
            flex: 1;
        }
        .chat-name {
            font-size: 16px;
            color: #333;
            margin-bottom: 3px;
        }
        .chat-msg {
            font-size: 14px;
            color: #888;
            white-space: nowrap;
            overflow: hidden;
            text-overflow: ellipsis;
        }
        .chat-time {
            font-size: 12px;
            color: #aaa;
        }

        /* Á©∫Áä∂ÊÄÅÊ†∑Âºè */
        .wechat-chats.empty {
            background-color: transparent;
            min-height: 200px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .empty-state {
            text-align: center;
            color: #999;
            padding: 40px 20px;
            display: none;
        }

        .empty-state.show {
            display: block;
        }

        .empty-state-icon {
            font-size: 48px;
            margin-bottom: 16px;
            opacity: 0.5;
        }

        .empty-state-text {
            font-size: 16px;
            margin-bottom: 8px;
        }

        .empty-state-subtext {
            font-size: 14px;
            opacity: 0.7;
        }

        /* Âà†Èô§Á°ÆËÆ§ÂºπÁ™ó */
        .delete-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .delete-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .delete-modal-content {
            background: white;
            border-radius: 12px;
            padding: 20px;
            width: 280px;
            text-align: center;
            transform: scale(0.7);
            transition: transform 0.3s ease;
        }

        .delete-modal.show .delete-modal-content {
            transform: scale(1);
        }

        .delete-modal-title {
            font-size: 18px;
            font-weight: 500;
            margin-bottom: 10px;
            color: #333;
        }

        .delete-modal-text {
            font-size: 14px;
            color: #666;
            margin-bottom: 20px;
        }

        .delete-modal-actions {
            display: flex;
            gap: 12px;
        }

        .modal-btn {
            flex: 1;
            padding: 10px 0;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.2s ease;
        }

        .modal-btn.cancel {
            background: #f0f0f0;
            color: #333;
        }

        .modal-btn.confirm {
            background: #FF3B30;
            color: white;
        }

        .modal-btn:hover {
            opacity: 0.9;
        }

        /* ÈïøÊåâÊèêÁ§∫ - Â∑≤ÁßªÈô§Áõ∏ÂÖ≥Ê†∑Âºè */

        .moments-container {
            background-color: white;
            min-height: 100%;
        }
        .moment-item {
            display: flex;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        .moment-avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            background-color: #07C160;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            margin-right: 12px;
        }
        .moment-content {
            flex: 1;
        }
        .moment-name {
            font-weight: bold;
            margin-bottom: 5px;
            color: #333;
        }
        .moment-text {
            margin-bottom: 5px;
            color: #333;
            line-height: 1.4;
        }
        .moment-time {
            font-size: 12px;
            color: #888;
        }
        .me-container {
            background-color: white;
            min-height: 100%;
        }
        .me-header {
            display: flex;
            align-items: center;
            padding: 20px;
            background: linear-gradient(135deg, #07C160, #06AD56);
            color: white;
            position: relative;
        }
        .me-avatar {
            width: 60px;
            height: 60px;
            border-radius: 8px; /* Êîπ‰∏∫Ê≠£ÊñπÂΩ¢Â∏¶ÂúÜËßí */
            background-color: rgba(255,255,255,0.2);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
            margin-right: 15px;
            border: 2px solid rgba(255,255,255,0.3);
            overflow: hidden;
        }
        .me-info {
            flex: 1;
        }
        .me-name {
            font-size: 18px;
            font-weight: bold;
            margin-bottom: 5px;
        }
        .me-id {
            font-size: 14px;
            opacity: 0.9;
        }
        .me-edit-btn {
            position: absolute;
            right: 20px;
            background: rgba(255,255,255,0.2);
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            border: 1px solid rgba(255,255,255,0.3);
        }
        .me-edit-btn:hover {
            background: rgba(255,255,255,0.3);
        }
        .me-menu {
            margin-top: 10px;
        }
        .menu-item {
            display: flex;
            align-items: center;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
            color: #333;
            cursor: pointer;
            transition: background-color 0.3s ease;
        }
        .menu-item:hover {
            background-color: #f8f8f8;
        }
        .menu-icon {
            width: 24px;
            height: 24px;
            margin-right: 12px;
            background-color: #07C160;
            border-radius: 4px;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 14px;
        }
        .wallet-icon {
            background-color: #FF9500;
        }
        .settings-page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #E5E5E5;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 7;
            display: flex;
            flex-direction: column;
        }
        .settings-header {
            height: 50px;
            background-color: #8E8E93;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 15px;
            color: white;
            font-weight: 500;
            font-size: 18px;
            margin-top: 0;
    padding-top: env(safe-area-inset-top);
            position: relative;
        }
        .settings-content {
            flex: 1;
            overflow-y: auto;
            padding: 20px 15px;
            margin-bottom: 60px;
        }
        .settings-section {
            background-color: white;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        .section-title {
            padding: 15px;
            font-weight: bold;
            color: #333;
            border-bottom: 1px solid #f0f0f0;
            background-color: #f8f8f8;
        }
        .settings-item {
            display: flex;
            align-items: center;
            justify-content: space-between;
            padding: 15px;
            border-bottom: 1px solid #f0f0f0;
        }
        .settings-item:last-child {
            border-bottom: none;
        }
        .item-label {
            font-size: 16px;
            color: #333;
        }
        .settings-input {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 8px 12px;
            font-size: 14px;
            width: 60%;
            background-color: #f9f9f9;
        }
        .settings-select {
            border: 1px solid #ddd;
            border-radius: 5px;
            padding: 8px 12px;
            font-size: 14px;
            background-color: #f9f9f9;
            width: 60%;
        }
        .toggle-switch {
            position: relative;
            display: inline-block;
            width: 50px;
            height: 28px;
        }
        .toggle-switch input {
            opacity: 0;
            width: 0;
            height: 0;
        }
        .toggle-slider {
            position: absolute;
            cursor: pointer;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background-color: #ccc;
            transition: .4s;
            border-radius: 34px;
        }
        .toggle-slider:before {
            position: absolute;
            content: "";
            height: 20px;
            width: 20px;
            left: 4px;
            bottom: 4px;
            background-color: white;
            transition: .4s;
            border-radius: 50%;
        }
        input:checked + .toggle-slider {
            background-color: #07C160;
        }
        input:checked + .toggle-slider:before {
            transform: translateX(22px);
        }
        .test-button, .action-button {
            width: 100%;
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 16px;
            cursor: pointer;
            transition: background-color 0.3s;
        }
        .test-button {
            background-color: #007AFF;
            color: white;
        }
        .test-button:hover {
            background-color: #0056CC;
        }
        .action-button.primary {
            background-color: #07C160;
            color: white;
        }
        .action-button.secondary {
            background-color: #8E8E93;
            color: white;
            margin-top: 8px;
        }
        .action-button:hover {
            opacity: 0.9;
        }
        .status-text {
            font-size: 14px;
            color: #666;
            text-align: center;
            width: 100%;
        }
        .status-text.connected {
            color: #07C160;
        }
        .status-text.error {
            color: #FF3B30;
        }
        
        /* Èí±ÂåÖÈ°µÈù¢Ê†∑Âºè - ÁÆÄÊ¥ÅÁâà */
        .wallet-page {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: #f5f5f5;
            transform: translateX(100%);
            transition: transform 0.3s ease;
            z-index: 6;
            display: flex;
            flex-direction: column;
        }

        .wallet-header {
            height: 50px;
            background-color: #07C160;
            display: flex;
            align-items: center;
            justify-content: center;
            padding: 0 15px;
            color: white;
            font-weight: 500;
            font-size: 18px;
            margin-top: 0;
    padding-top: env(safe-area-inset-top);
            position: relative;
        }

        .wallet-back-btn {
            position: absolute;
            left: 15px;
            font-size: 20px;
            cursor: pointer;
            color: white;
        }

        .wallet-detail-btn {
            position: absolute;
            right: 15px;
            font-size: 14px;
            cursor: pointer;
            color: white;
        }

        .wallet-content {
            flex: 1;
            overflow-y: auto;
            padding: 0;
            margin-bottom: 60px;
        }

        /* ‰ΩôÈ¢ùÂç°Áâá - ÁÆÄÊ¥ÅÁâà */
        .balance-card {
            background: white;
            padding: 40px 20px;
            text-align: center;
            border-bottom: 1px solid #e1e1e1;
        }

        .balance-label {
            font-size: 16px;
            color: #666;
            margin-bottom: 20px;
        }

        .balance-amount {
            font-size: 42px;
            font-weight: bold;
            color: #333;
            font-family: 'Arial', sans-serif;
        }

        .currency-symbol {
            font-size: 28px;
            margin-right: 5px;
            color: #333;
        }

        /* Êìç‰ΩúÊåâÈíÆÂå∫Âüü - Á´ñÂêëÊéíÂàó */
        .actions-section {
            background: white;
            margin-bottom: 10px;
        }

        .actions-column {
            display: flex;
            flex-direction: column;
            padding: 0;
        }

        .action-btn {
            display: flex;
            align-items: center;
            padding: 20px 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            border-bottom: 1px solid #f0f0f0;
            text-decoration: none;
            color: inherit;
        }

        .action-btn:last-child {
            border-bottom: none;
        }

        .action-btn:hover {
            background-color: #f8f8f8;
        }

        .action-icon {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 18px;
            color: white;
            margin-right: 15px;
        }

        .recharge-icon {
            background-color: #07C160;
        }

        .withdraw-icon {
            background-color: #8E8E93;
        }

        .action-info {
            flex: 1;
            text-align: left;
        }

        .action-title {
            font-size: 16px;
            color: #333;
            font-weight: 500;
            margin-bottom: 4px;
        }

        .action-desc {
            font-size: 12px;
            color: #999;
        }

        .action-arrow {
            font-size: 16px;
            color: #ccc;
        }

        /* ÂÖÖÂÄºÂºπÁ™óÊ†∑Âºè */
        .recharge-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .recharge-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .recharge-modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 400px;
            transform: scale(0.7);
            transition: transform 0.3s ease;
        }

        .recharge-modal.show .recharge-modal-content {
            transform: scale(1);
        }

        .recharge-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
        }

        .recharge-modal-title {
            font-size: 18px;
            font-weight: 500;
            color: #333;
        }

        .recharge-modal-close {
            font-size: 24px;
            color: #999;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .recharge-modal-close:hover {
            background: #f5f5f5;
            color: #333;
        }

        .recharge-modal-body {
            padding: 20px;
        }

        .amount-input-group {
            margin-bottom: 20px;
        }

        .amount-label {
            font-size: 16px;
            color: #333;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .amount-input-wrapper {
            position: relative;
        }

        .amount-input {
            width: 100%;
            padding: 15px 15px 15px 45px;
            border: 1px solid #e1e1e1;
            border-radius: 8px;
            font-size: 18px;
            text-align: left;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .amount-input:focus {
            border-color: #07C160;
            outline: none;
        }

        .input-currency {
            position: absolute;
            left: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-size: 18px;
            color: #333;
            font-weight: bold;
        }

        .quick-amounts {
            display: grid;
            grid-template-columns: repeat(3, 1fr);
            gap: 10px;
            margin-bottom: 20px;
        }

        .quick-amount {
            padding: 12px;
            border: 1px solid #e1e1e1;
            border-radius: 8px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s ease;
            background: white;
            font-size: 16px;
        }

        .quick-amount:hover {
            border-color: #07C160;
            background: #f8fff8;
        }

        .quick-amount.active {
            border-color: #07C160;
            background: #07C160;
            color: white;
        }

        .recharge-modal-actions {
            display: flex;
            gap: 12px;
            padding: 20px;
            border-top: 1px solid #f0f0f0;
        }

        .modal-btn {
            flex: 1;
            padding: 12px;
            border: none;
            border-radius: 6px;
            font-size: 16px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .modal-btn.cancel {
            background: #f0f0f0;
            color: #333;
        }

        .modal-btn.confirm {
            background: #07C160;
            color: white;
        }

        .modal-btn:hover {
            opacity: 0.9;
        }

        /* È¢ÑËÆæÁÆ°ÁêÜÊ†∑Âºè */
        .preset-configs {
            display: none;
        }
        .preset-config {
            background-color: #f8f9fa;
            border-radius: 8px;
            margin: 10px 0;
            padding: 10px;
            border-left: 4px solid #007AFF;
            display: none;
        }
        .preset-management {
            width: 100%;
        }
        .preset-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: #f8f9fa;
            border-radius: 6px;
            margin-bottom: 8px;
        }
        .preset-info {
            flex: 1;
        }
        .preset-name {
            font-weight: bold;
            color: #333;
        }
        .preset-url {
            font-size: 12px;
            color: #666;
            margin-top: 2px;
        }
        .preset-actions {
            display: flex;
            gap: 8px;
        }
        .preset-btn {
            padding: 4px 8px;
            border: none;
            border-radius: 4px;
            font-size: 12px;
            cursor: pointer;
        }
        .preset-btn.apply {
            background-color: #07C160;
            color: white;
        }
        .preset-btn.delete {
            background-color: #FF3B30;
            color: white;
        }
        .preset-tag {
            display: inline-block;
            padding: 2px 6px;
            background-color: #007AFF;
            color: white;
            border-radius: 10px;
            font-size: 10px;
            margin-left: 6px;
        }

        /* Ê®°ÂûãÁÆ°ÁêÜÊ†∑Âºè */
        .model-list {
            max-height: 200px;
            overflow-y: auto;
            border: 1px solid #e1e1e1;
            border-radius: 8px;
            padding: 10px;
            background-color: #f8f9fa;
        }

        .model-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 10px;
            background-color: white;
            border-radius: 6px;
            margin-bottom: 8px;
            border: 1px solid #e1e1e1;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .model-item:hover {
            background-color: #f0f0f0;
            transform: translateY(-1px);
        }

        .model-item.selected {
            border-color: #007AFF;
            background-color: #e3f2fd;
        }

        .model-info {
            flex: 1;
        }

        .model-name {
            font-weight: bold;
            color: #333;
            font-size: 14px;
        }

        .model-id {
            font-size: 12px;
            color: #666;
            margin-top: 2px;
        }

        .model-status {
            font-size: 12px;
            padding: 4px 8px;
            border-radius: 12px;
            font-weight: bold;
        }

        .model-status.available {
            background-color: #07C160;
            color: white;
        }

        .model-status.downloading {
            background-color: #007AFF;
            color: white;
        }

        .model-status.not-downloaded {
            background-color: #8E8E93;
            color: white;
        }

        .model-status.error {
            background-color: #FF3B30;
            color: white;
        }

        /* ËøõÂ∫¶Êù°Ê†∑Âºè */
        .progress-info {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 8px;
        }

        .progress-text {
            font-size: 14px;
            color: #333;
        }

        .progress-percent {
            font-size: 14px;
            font-weight: bold;
            color: #007AFF;
        }

        .progress-bar {
            width: 100%;
            height: 6px;
            background-color: #e1e1e1;
            border-radius: 3px;
            overflow: hidden;
        }

        .progress-fill {
            height: 100%;
            background: linear-gradient(90deg, #007AFF, #00C6FF);
            border-radius: 3px;
            transition: width 0.3s ease;
            width: 0%;
        }

        /* Ê®°ÂûãÊìç‰ΩúÊåâÈíÆ */
        .model-actions {
            display: flex;
            gap: 8px;
            margin-top: 10px;
        }

        .model-btn {
            padding: 6px 12px;
            border: none;
            border-radius: 6px;
            font-size: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .model-btn.primary {
            background-color: #007AFF;
            color: white;
        }

        .model-btn.secondary {
            background-color: #8E8E93;
            color: white;
        }

        .model-btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }
        
        .unlocked .lock-screen {
            transform: translateX(-100%);
        }
        .unlocked .home-screen {
            transform: translateX(0);
        }
        .unlocked .screen {
            background-color: #2c2c2e;
        }
        .wechat-opened .wechat-page {
            transform: translateX(0);
        }
        .wechat-opened .status-bar{opacity:0!important;pointer-events:none!important;}
        .wechat-opened .wechat-status-bar{display:none!important;}
        .wallet-opened .wallet-page {
            transform: translateX(0);
        }
        .wallet-opened .status-bar{opacity:0!important;pointer-events:none!important;}
        .wallet-opened .wechat-status-bar{display:none!important;}
        .settings-opened .settings-page {
            transform: translateX(0);
        }
        .settings-opened .status-bar{opacity:0!important;pointer-events:none!important;}
        .settings-opened .wechat-status-bar{display:none!important;}
        .slide-to-unlock:active .slide-icon {
            transform: translateX(120px);
        }
        .slide-to-unlock:active {
            opacity: 0.5;
        }
        ::-webkit-scrollbar {
            display: none;
        }
        
        /* ÊèêÁ§∫Ê°ÜÊ†∑Âºè */
        #presetToast {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background: rgba(0,0,0,0.8);
            color: white;
            padding: 12px 20px;
            border-radius: 8px;
            z-index: 1000;
            font-size: 14px;
            transition: opacity 0.3s;
            opacity: 0;
        }

        /* ÁºñËæëËµÑÊñôÂºπÁ™óÊ†∑Âºè */
        .edit-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: flex;
            align-items: center;
            justify-content: center;
            z-index: 1000;
            opacity: 0;
            visibility: hidden;
            transition: all 0.3s ease;
        }

        .edit-modal.show {
            opacity: 1;
            visibility: visible;
        }

        .edit-modal-content {
            background: white;
            border-radius: 12px;
            width: 90%;
            max-width: 400px;
            max-height: 80vh;
            overflow-y: auto;
            transform: scale(0.7);
            transition: transform 0.3s ease;
        }

        .edit-modal.show .edit-modal-content {
            transform: scale(1);
        }

        .edit-modal-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            border-bottom: 1px solid #f0f0f0;
        }

        .edit-modal-title {
            font-size: 18px;
            font-weight: 500;
            color: #333;
        }

        .edit-modal-close {
            font-size: 24px;
            color: #999;
            cursor: pointer;
            width: 30px;
            height: 30px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 50%;
            transition: all 0.3s ease;
        }

        .edit-modal-close:hover {
            background: #f5f5f5;
            color: #333;
        }

        .edit-modal-body {
            padding: 20px;
        }

        .edit-section {
            margin-bottom: 20px;
        }

        .edit-label {
            font-size: 16px;
            color: #333;
            margin-bottom: 8px;
            font-weight: 500;
        }

        .avatar-upload {
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .avatar-preview {
            width: 60px;
            height: 60px;
            border-radius: 8px; /* Êîπ‰∏∫Ê≠£ÊñπÂΩ¢Â∏¶ÂúÜËßí */
            background: linear-gradient(135deg, #07C160, #06AD56);
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-size: 18px;
            border: 2px solid #e1e1e1;
            overflow: hidden;
            position: relative;
        }

        .upload-btn {
            padding: 8px 16px;
            background: #07C160;
            color: white;
            border: none;
            border-radius: 6px;
            cursor: pointer;
            font-size: 14px;
            transition: all 0.3s ease;
        }

        .upload-btn:hover {
            background: #06AD56;
        }

        .edit-input, .edit-textarea {
            width: 100%;
            padding: 12px;
            border: 1px solid #e1e1e1;
            border-radius: 6px;
            font-size: 14px;
            transition: all 0.3s ease;
            box-sizing: border-box;
        }

        .edit-input:focus, .edit-textarea:focus {
            border-color: #07C160;
            outline: none;
            box-shadow: 0 0 0 2px rgba(7, 193, 96, 0.1);
        }

        .edit-textarea {
            height: 80px;
            resize: none;
            font-family: inherit;
        }

        .edit-tip {
            font-size: 12px;
            color: #999;
            margin-top: 4px;
        }

        .edit-modal-actions {
            display: flex;
            gap: 12px;
            padding: 20px;
            border-top: 1px solid #f0f0f0;
        }

        /* ÂÖ®Â±èÊ®°Âºè‰ºòÂåñ */
        @supports (-webkit-touch-callout: none) {
            .iphone {
                height: 100vh;
                height: -webkit-fill-available;
            }
        }

        /* ÂÖ®Â±èÊ®°Âºè‰∏ãÁöÑÁä∂ÊÄÅÊ†è‰ºòÂåñ */
        .standalone-mode .status-bar{opacity:0!important;pointer-events:none!important;}
    
/* --- ÂÆòÊñπ SVG ÂõæÊ†áÊ†∑Âºè --- */
.icon { display: block; width: 24px; height: 24px; }
.nav-text { font-size: 12px; color: #8E8E93; margin-top: 4px; }

.wechat-bottom-nav { position: absolute; bottom: 0; left: 0; width: 100%; height: 60px; background-color: white; display: flex; border-top: 1px solid #e1e1e1; z-index: 10; }
.wechat-bottom-nav .nav-item { flex:1; display:flex; flex-direction:column; align-items:center; justify-content:center; cursor:pointer; position:relative; overflow:hidden; }
.wechat-bottom-nav .nav-item .ripple { position:absolute; border-radius:50%; transform:scale(0); background: rgba(7,193,96,0.15); width: 10px; height: 10px; pointer-events:none; transition: transform 0.5s, opacity 0.5s; opacity:0; }
/* active (green) */
.nav-item.active .nav-text { color: #07C160; }
.nav-item.active .icon path, .nav-item.active .icon circle, .nav-item.active .icon rect { stroke: #07C160 !important; fill: #07C160 !important; }

/* basic tap feedback */
.nav-item:active .ripple { transform: scale(6); opacity:1; transition: transform 0.25s, opacity 0.4s; }


.wechat-header, .settings-header {
 background:#ffffff!important;
 color:#000!important;
 border-bottom:1px solid rgba(0,0,0,0.1);
 height:44px;
 display:flex;
 align-items:center;
 padding:0 15px;
 box-sizing:border-box;
}
.wechat-opened .wechat-content{padding-top:44px!important;}


/* Force back buttons to black */
.wechat-back-btn,
.wallet-back-btn {
    color: #000 !important;
}

</style>
</head>
<body>

<!-- SVG sprite: official-style icons (symbols) -->
<svg xmlns="http://www.w3.org/2000/svg" style="display:none" aria-hidden="true">
  <symbol id="icon-wechat" viewBox="0 0 24 24">
    <path d="M5 17c-1.1 0-2-.9-2-2V7c0-1.1.9-2 2-2h9c1.1 0 2 .9 2 2v3" stroke="#8E8E93" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
    <path d="M21 15c0 1.1-.9 2-2 2H9l-3 3v-3H6.5" stroke="#8E8E93" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
    <circle cx="14.5" cy="9.5" r="0.9" fill="#8E8E93"/>
    <circle cx="10.5" cy="9.5" r="0.9" fill="#8E8E93"/>
  </symbol>

  <symbol id="icon-contacts" viewBox="0 0 24 24">
    <rect x="3" y="4" width="14" height="16" rx="2" stroke="#8E8E93" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
    <path d="M19 6h2v12h-2" stroke="#8E8E93" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
    <circle cx="9.5" cy="10" r="1.6" stroke="#8E8E93" stroke-width="1.6" fill="none"/>
    <path d="M7.5 14c0-1.5 2-2.2 4-2.2s4 .7 4 2.2" stroke="#8E8E93" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
  </symbol>

  <symbol id="icon-discover" viewBox="0 0 24 24">
    <circle cx="12" cy="12" r="8" stroke="#8E8E93" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
    <path d="M13.2 6.8L9.8 10.2l3.4 3.4 3.4-3.4L13.2 6.8z" stroke="#8E8E93" stroke-width="1.6" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
  </symbol>

  <symbol id="icon-me" viewBox="0 0 24 24">
    <circle cx="12" cy="8.5" r="2.2" stroke="#8E8E93" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
    <path d="M5 19c0-3.3 3.6-5 7-5s7 1.7 7 5" stroke="#8E8E93" stroke-width="1.8" stroke-linecap="round" stroke-linejoin="round" fill="none"/>
  </symbol>
</svg>

    <div class="iphone">
        <div class="screen" id="screen">
            <div class="status-bar">
                <span id="statusTime">00:00</span>
                <div style="display: flex; align-items: center;">
                    <div class="signal">
                        <div class="signal-bar"></div>
                        <div class="signal-bar"></div>
                        <div class="signal-bar"></div>
                        <div class="signal-bar"></div>
                    </div>
                    <div class="battery">
                        <div class="battery-outline">
                            <div class="battery-fill"></div>
                        </div>
                    </div>
                </div>
            </div>
            
            <div class="speaker"></div>
            
            <div class="lock-screen" id="lockScreen">
                <div class="lock-screen-content">
                    <div class="date" id="lockDate">ÊòüÊúüX Êúà Êó•</div>
                    <div class="time" id="lockTime">00:00</div>
                </div>
                <div class="slide-to-unlock" id="slideToUnlock">
                    <span class="slide-icon"></span>
                    <span>Âè≥ÊªëËß£ÈîÅ</span>
                </div>
            </div>
            
            <div class="home-screen" id="homeScreen">
                <div class="app-grid">
                    <div class="app-icon">
                        <div class="app-icon-outer">üì±</div>
                        <div class="app-name">ÁîµËØù</div>
                    </div>
                    <div class="app-icon">
                        <div class="app-icon-outer">üí¨</div>
                        <div class="app-name">‰ø°ÊÅØ</div>
                    </div>
                    <div class="app-icon" id="wechatIcon">
                        <div class="app-icon-outer wechat-icon">üí¨</div>
                        <div class="app-name">ÂæÆ‰ø°</div>
                    </div>
                   <!-- QQ ÂõæÊ†á -->
<div class="app-icon" id="qqIcon">
    <div class="app-icon-outer" style="background-color:#12B7F5;">üêß</div>
    <div class="app-name">QQ</div>
</div>
                    <div class="app-icon">
                        <div class="app-icon-outer">üéµ</div>
                        <div class="app-name">Èü≥‰πê</div>
                    </div>
                    <div class="app-icon" id="settingsIcon">
                        <div class="app-icon-outer" style="background-color: #8E8E93;">‚öôÔ∏è</div>
                        <div class="app-name">ËÆæÁΩÆ</div>
                    </div>
                </div>
            </div>
            
            <div class="wechat-page" id="wechatPage">
                <div class="wechat-status-bar">
                    <span id="wechatStatusTime">00:00</span>
                    <div style="display: flex; align-items: center;">
                        <div class="signal">
                            <div class="signal-bar"></div>
                            <div class="signal-bar"></div>
                            <div class="signal-bar"></div>
                            <div class="signal-bar"></div>
                        </div>
                        <div class="battery">
                            <div class="battery-outline">
                                <div class="battery-fill"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="wechat-content">
                    <div class="content-page active" id="chat-page">
                        <div class="wechat-header">
                            <div class="wechat-back-btn" id="wechatBackBtn">‚Üê</div>
                            <div class="wechat-title">ÂæÆ‰ø°</div>
                            <div class="wechat-header-icon">
                                <span>+</span>
                                <span>‚ãÆ</span>
                            </div>
                        </div>
                        <div class="wechat-chats" id="chatList">
                            <div class="chat-item">
                                <div class="chat-item-content">
                                    <div class="chat-avatar" style="background-color: #07C160; color: white;">ÂæÆ</div>
                                    <div class="chat-info">
                                        <div class="chat-name">ÂæÆ‰ø°Âõ¢Èòü</div>
                                        <div class="chat-msg">Ê¨¢Ëøé‰ΩøÁî®ÂæÆ‰ø°</div>
                                    </div>
                                    <div class="chat-time">09:42</div>
                                </div>
                                <div class="delete-action">Âà†Èô§</div>
                            </div>
                            <div class="chat-item">
                                <div class="chat-item-content">
                                    <div class="chat-avatar" style="background-color: #1296DB; color: white;">Êñá</div>
                                    <div class="chat-info">
                                        <div class="chat-name">Êñá‰ª∂‰º†ËæìÂä©Êâã</div>
                                        <div class="chat-msg">‰Ω†ÂèØ‰ª•Âú®ËøôÈáå‰º†ËæìÊñá‰ª∂</div>
                                    </div>
                                    <div class="chat-time">Êò®Â§©</div>
                                </div>
                                <div class="delete-action">Âà†Èô§</div>
                            </div>
                            <div class="chat-item">
                                <div class="chat-item-content">
                                    <div class="chat-avatar" style="background-color: #FF9500; color: white;">ÂÆ∂</div>
                                    <div class="chat-info">
                                        <div class="chat-name">ÂÆ∂‰∫∫Áæ§</div>
                                        <div class="chat-msg">Â¶àÂ¶àÔºöÊôö‰∏äÂõûÂÆ∂ÂêÉÈ•≠ÂêóÔºü</div>
                                    </div>
                                    <div class="chat-time">Êò®Â§©</div>
                                </div>
                                <div class="delete-action">Âà†Èô§</div>
                            </div>
                            
                            <!-- Á©∫Áä∂ÊÄÅÊèêÁ§∫ -->
                            <div class="empty-state" id="emptyState">
                                <div class="empty-state-icon">üí¨</div>
                                <div class="empty-state-text">ÊöÇÊó†ËÅäÂ§©ËÆ∞ÂΩï</div>
                                <div class="empty-state-subtext">Â∑¶ÊªëÂà†Èô§ËÅäÂ§©Ôºå‰∏ãÊãâÂà∑Êñ∞</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="content-page" id="moments-page">
                        <div class="moments-container">
                            <div class="moment-item">
                                <div class="moment-avatar">Âº†</div>
<div class="content-page" id="contacts-page"></div>
<div class="content-page" id="discover-page"></div>

                                <div class="moment-content">
                                    <div class="moment-name">Âº†‰∏â</div>
                                    <div class="moment-text">‰ªäÂ§©ÁöÑÂ§ïÈò≥ÁúüÁæéÔºåÂàÜ‰∫´ÁªôÂ§ßÂÆ∂ÔºÅüåÖ</div>
                                    <div class="moment-time">1Â∞èÊó∂Ââç</div>
                                </div>
                            </div>
                            <div class="moment-item">
                                <div class="moment-avatar">Êùé</div>
                                <div class="moment-content">
                                    <div class="moment-name">ÊùéÂõõ</div>
                                    <div class="moment-text">Êñ∞Â≠¶ÁöÑËèúË∞±ÔºåÂë≥ÈÅìËøò‰∏çÈîô üòã</div>
                                    <div class="moment-time">3Â∞èÊó∂Ââç</div>
                                </div>
                            </div>
                            <div class="moment-item">
                                <div class="moment-avatar">Áéã</div>
                                <div class="moment-content">
                                    <div class="moment-name">Áéã‰∫î</div>
                                    <div class="moment-text">Âë®Êú´ÂéªÁà¨Â±±ÔºåÁ©∫Ê∞îÁúüÂ•ΩÔºÅ</div>
                                    <div class="moment-time">5Â∞èÊó∂Ââç</div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="content-page" id="me-page">
                        <div class="me-container">
                            <div class="me-header">
                                <div class="me-avatar" id="userAvatar">
                                    <img id="avatarImage" src="" alt="Â§¥ÂÉè" style="width: 100%; height: 100%; border-radius: 8px; display: none;">
                                    <span id="avatarText">Êàë</span>
                                </div>
                                <div class="me-info">
                                    <div class="me-name" id="userName">ÂæÆ‰ø°Áî®Êà∑</div>
                                    <div class="me-id" id="userId">ÂæÆ‰ø°Âè∑: wechat12345</div>
                                </div>
                                <div class="me-edit-btn" id="editProfileBtn">ÁºñËæëËµÑÊñô</div>
                            </div>
                            <div class="me-menu">
                                <div class="menu-item" id="walletMenuItem">
                                    <div class="menu-icon wallet-icon">üí∞</div>
                                    <span>Èí±ÂåÖ</span>
                                </div>
                                <div class="menu-item">
                                    <div class="menu-icon">Ë°®</div>
                                    <span>Ë°®ÊÉÖ</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                
<div class="wechat-bottom-nav">
    <div class="nav-item active" data-tab="chat" aria-label="ÂæÆ‰ø°">
        <svg class="icon" width="24" height="24" aria-hidden="true"><use href="#icon-wechat"></use></svg>
        <div class="nav-text">ÂæÆ‰ø°</div>
        <span class="ripple"></span>
    </div>
    <div class="nav-item" data-tab="contacts" aria-label="ÈÄöËÆØÂΩï">
        <svg class="icon" width="24" height="24" aria-hidden="true"><use href="#icon-contacts"></use></svg>
        <div class="nav-text">ÈÄöËÆØÂΩï</div>
        <span class="ripple"></span>
    </div>
    <div class="nav-item" data-tab="discover" aria-label="ÂèëÁé∞">
        <svg class="icon" width="24" height="24" aria-hidden="true"><use href="#icon-discover"></use></svg>
        <div class="nav-text">ÂèëÁé∞</div>
        <span class="ripple"></span>
    </div>
    <div class="nav-item" data-tab="me" aria-label="Êàë">
        <svg class="icon" width="24" height="24" aria-hidden="true"><use href="#icon-me"></use></svg>
        <div class="nav-text">Êàë</div>
        <span class="ripple"></span>
    </div>
</div>

</div>
                    <div class="nav-item" data-tab="moments">
                        <div class="nav-icon">üì∏</div>
                        <div class="nav-text">ÊúãÂèãÂúà</div>
                    </div>
                    <div class="nav-item" data-tab="me">
                        <div class="nav-icon">üë§</div>
                        <div class="nav-text">Êàë</div>
                    </div>
                </div>
            </div>

            <!-- Èí±ÂåÖÈ°µÈù¢ - ÁÆÄÊ¥ÅÁâà -->
            <div class="wallet-page" id="walletPage">
                <div class="wechat-status-bar">
                    <span id="walletStatusTime">00:00</span>
                    <div style="display: flex; align-items: center;">
                        <div class="signal">
                            <div class="signal-bar"></div>
                            <div class="signal-bar"></div>
                            <div class="signal-bar"></div>
                            <div class="signal-bar"></div>
                        </div>
                        <div class="battery">
                            <div class="battery-outline">
                                <div class="battery-fill"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="wallet-header">
                    <div class="wallet-back-btn" id="walletBackBtn">‚Üê</div>
                    <div class="wechat-title">Èí±ÂåÖ</div>
                    <div class="wallet-detail-btn" id="walletDetailBtn">Èõ∂Èí±ÊòéÁªÜ</div>
                </div>
                
                <div class="wallet-content">
                    <!-- ‰ΩôÈ¢ùÊòæÁ§∫ -->
                    <div class="balance-card">
                        <div class="balance-label">ÊàëÁöÑÈõ∂Èí±</div>
                        <div class="balance-amount">
                            <span class="currency-symbol">¬•</span><span id="balanceAmount">0.00</span>
                        </div>
                    </div>
                    
                    <!-- Êìç‰ΩúÊåâÈíÆ - Á´ñÂêëÊéíÂàó -->
                    <div class="actions-section">
                        <div class="actions-column">
                            <div class="action-btn" id="rechargeBtn">
                                <div class="action-icon recharge-icon">ÂÖÖ</div>
                                <div class="action-info">
                                    <div class="action-title">ÂÖÖÂÄº</div>
                                    <div class="action-desc">ÂÖÖÂÄºÂà∞Èõ∂Èí±</div>
                                </div>
                                <div class="action-arrow">></div>
                            </div>
                            <div class="action-btn" id="withdrawBtn">
                                <div class="action-icon withdraw-icon">Êèê</div>
                                <div class="action-info">
                                    <div class="action-title">ÊèêÁé∞</div>
                                    <div class="action-desc">ÊèêÁé∞Âà∞Èì∂Ë°åÂç°</div>
                                </div>
                                <div class="action-arrow">></div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Âà†Èô§Á°ÆËÆ§ÂºπÁ™ó -->
            <div class="delete-modal" id="deleteModal">
                <div class="delete-modal-content">
                    <div class="delete-modal-title">Âà†Èô§ËÅäÂ§©</div>
                    <div class="delete-modal-text">Âà†Èô§ÂêéÔºåÂ∞ÜÊ∏ÖÁ©∫ËØ•ËÅäÂ§©ÁöÑÊ∂àÊÅØËÆ∞ÂΩï</div>
                    <div class="delete-modal-actions">
                        <button class="modal-btn cancel" id="cancelDelete">ÂèñÊ∂à</button>
                        <button class="modal-btn confirm" id="confirmDelete">Âà†Èô§</button>
                    </div>
                </div>
            </div>

            <!-- ÁºñËæëËµÑÊñôÂºπÁ™ó -->
            <div class="edit-modal" id="editModal">
                <div class="edit-modal-content">
                    <div class="edit-modal-header">
                        <div class="edit-modal-title">ÁºñËæëËµÑÊñô</div>
                        <div class="edit-modal-close" id="closeEditModal">√ó</div>
                    </div>
                    
                    <div class="edit-modal-body">
                        <!-- Â§¥ÂÉè‰∏ä‰º† -->
                        <div class="edit-section">
                            <div class="edit-label">Â§¥ÂÉè</div>
                            <div class="avatar-upload">
                                <div class="avatar-preview" id="avatarPreview">
                                    <img id="previewImage" src="" alt="È¢ÑËßà" style="width: 100%; height: 100%; border-radius: 8px; display: none;">
                                    <span id="previewText">Êàë</span>
                                </div>
                                <input type="file" id="avatarInput" accept="image/*" style="display: none;">
                                <button class="upload-btn" id="uploadAvatarBtn">ÈÄâÊã©ÂõæÁâá</button>
                            </div>
                        </div>
                        
                        <!-- Áî®Êà∑Âêç‰øÆÊîπ -->
                        <div class="edit-section">
                            <div class="edit-label">ÂêçÂ≠ó</div>
                            <input type="text" class="edit-input" id="editNameInput" placeholder="ËØ∑ËæìÂÖ•ÂêçÂ≠ó" maxlength="20">
                            <div class="edit-tip">‰∏çË∂ÖËøá20‰∏™Â≠óÁ¨¶</div>
                        </div>
                        
                        <!-- ÂæÆ‰ø°Âè∑‰øÆÊîπ -->
                        <div class="edit-section">
                            <div class="edit-label">ÂæÆ‰ø°Âè∑</div>
                            <input type="text" class="edit-input" id="editIdInput" placeholder="ËØ∑ËæìÂÖ•ÂæÆ‰ø°Âè∑" maxlength="20">
                            <div class="edit-tip">ÂæÆ‰ø°Âè∑ÊòØÂîØ‰∏ÄÁöÑÔºå‰øÆÊîπÂêé‰∏çËÉΩÊõ¥Êîπ</div>
                        </div>
                        
                        <!-- ‰∏™ÊÄßÁ≠æÂêç -->
                        <div class="edit-section">
                            <div class="edit-label">‰∏™ÊÄßÁ≠æÂêç</div>
                            <textarea class="edit-textarea" id="editBioInput" placeholder="ËØ∑ËæìÂÖ•‰∏™ÊÄßÁ≠æÂêç" maxlength="50"></textarea>
                            <div class="edit-tip">‰∏çË∂ÖËøá50‰∏™Â≠óÁ¨¶</div>
                        </div>
                    </div>
                    
                    <div class="edit-modal-actions">
                        <button class="modal-btn cancel" id="cancelEdit">ÂèñÊ∂à</button>
                        <button class="modal-btn confirm" id="saveEdit">‰øùÂ≠ò</button>
                    </div>
                </div>
            </div>

            <!-- ÂÖÖÂÄºÂºπÁ™ó -->
            <div class="recharge-modal" id="rechargeModal">
                <div class="recharge-modal-content">
                    <div class="recharge-modal-header">
                        <div class="recharge-modal-title">ÂÖÖÂÄº</div>
                        <div class="recharge-modal-close" id="closeRechargeModal">√ó</div>
                    </div>
                    
                    <div class="recharge-modal-body">
                        <div class="amount-input-group">
                            <div class="amount-label">ÂÖÖÂÄºÈáëÈ¢ù</div>
                            <div class="amount-input-wrapper">
                                <span class="input-currency">¬•</span>
                                <input type="number" class="amount-input" id="amountInput" placeholder="0.00" min="0.01" step="0.01">
                            </div>
                        </div>
                        
                        <div class="quick-amounts">
                            <div class="quick-amount" data-amount="10">10</div>
                            <div class="quick-amount" data-amount="50">50</div>
                            <div class="quick-amount" data-amount="100">100</div>
                            <div class="quick-amount" data-amount="200">200</div>
                            <div class="quick-amount" data-amount="500">500</div>
                            <div class="quick-amount" data-amount="1000">1000</div>
                        </div>
                    </div>
                    
                    <div class="recharge-modal-actions">
                        <button class="modal-btn cancel" id="cancelRecharge">ÂèñÊ∂à</button>
                        <button class="modal-btn confirm" id="confirmRecharge">Á°ÆËÆ§ÂÖÖÂÄº</button>
                    </div>
                </div>
            </div>


            <div class="settings-page" id="settingsPage">
                <div class="wechat-status-bar">
                    <span id="settingsStatusTime">00:00</span>
                    <div style="display: flex; align-items: center;">
                        <div class="signal">
                            <div class="signal-bar"></div>
                            <div class="signal-bar"></div>
                            <div class="signal-bar"></div>
                            <div class="signal-bar"></div>
                        </div>
                        <div class="battery">
                            <div class="battery-outline">
                                <div class="battery-fill"></div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="settings-header">
                    <div class="wechat-back-btn" id="settingsBackBtn">‚Üê</div>
                    <div class="wechat-title">APIËÆæÁΩÆ</div>
                </div>
                
                <div class="settings-content">
                    <!-- APIÈ¢ÑËÆæÁÆ°ÁêÜÈÉ®ÂàÜ -->
                    <div class="settings-section">
                        <div class="section-title">APIÈ¢ÑËÆæÁÆ°ÁêÜ</div>
                        
                        <div class="settings-item">
                            <div class="item-label">ÈÄâÊã©È¢ÑËÆæ</div>
                            <select id="presetSelector" class="settings-select">
                                <option value="custom">Ëá™ÂÆö‰πâÈÖçÁΩÆ</option>
                                <option value="preset1">È¢ÑËÆæ1: OpenAIÂÆòÊñπ</option>
                                <option value="preset2">È¢ÑËÆæ2: ÂõΩÂÜÖ‰ª£ÁêÜ1</option>
                                <option value="preset3">È¢ÑËÆæ3: ÂõΩÂÜÖ‰ª£ÁêÜ2</option>
                            </select>
                        </div>
                        
                        <div id="presetConfigs" class="preset-configs">
                            <div class="preset-config" data-preset="preset1">
                                <div class="settings-item">
                                    <div class="item-label">APIÂú∞ÂùÄ</div>
                                    <input type="text" class="preset-api-url settings-input" value="https://api.openai.com/v1" readonly>
                                </div>
                                <div class="settings-item">
                                    <div class="item-label">APIÂØÜÈí•</div>
                                    <input type="password" class="preset-api-key settings-input" placeholder="ËæìÂÖ•OpenAI APIÂØÜÈí•">
                                </div>
                            </div>
                            
                            <div class="preset-config" data-preset="preset2">
                                <div class="settings-item">
                                    <div class="item-label">APIÂú∞ÂùÄ</div>
                                    <input type="text" class="preset-api-url settings-input" value="https://api.aimlapi.com/v1" readonly>
                                </div>
                                <div class="settings-item">
                                    <div class="item-label">APIÂØÜÈí•</div>
                                    <input type="password" class="preset-api-key settings-input" placeholder="ËæìÂÖ•‰ª£ÁêÜAPIÂØÜÈí•">
                                </div>
                            </div>
                            
                            <div class="preset-config" data-preset="preset3">
                                <div class="settings-item">
                                    <div class="item-label">APIÂú∞ÂùÄ</div>
                                    <input type="text" class="preset-api-url settings-input" value="https://chatgpt.proxy/v1" readonly>
                                </div>
                                <div class="settings-item">
                                    <div class="item-label">APIÂØÜÈí•</div>
                                    <input type="password" class="preset-api-key settings-input" placeholder="ËæìÂÖ•‰ª£ÁêÜAPIÂØÜÈí•">
                                </div>
                            </div>
                        </div>
                        
                        <div class="settings-item" style="flex-direction: column; align-items: stretch;">
                            <button id="applyPreset" class="action-button primary" style="margin-bottom: 8px;">Â∫îÁî®Ê≠§È¢ÑËÆæ</button>
                            <button id="saveCurrentAsPreset" class="action-button secondary">‰øùÂ≠òÂΩìÂâç‰∏∫È¢ÑËÆæ</button>
                        </div>
                        
                        <div class="settings-item" style="flex-direction: column; align-items: stretch;">
                            <div class="preset-management">
                                <input type="text" id="newPresetName" class="settings-input" placeholder="Êñ∞È¢ÑËÆæÂêçÁß∞" style="margin-bottom: 8px;">
                                <button id="createNewPreset" class="action-button secondary">ÂàõÂª∫Êñ∞È¢ÑËÆæ</button>
                            </div>
                        </div>
                    </div>

                    <div class="settings-section">
                        <div class="section-title">APIÈÖçÁΩÆ</div>
                        <div class="settings-item">
                            <div class="item-label">APIÂú∞ÂùÄ</div>
                            <input type="text" id="apiUrl" class="settings-input" placeholder="https://api.example.com" value="https://api.example.com">
                        </div>
                        <div class="settings-item">
                            <div class="item-label">APIÂØÜÈí•</div>
                            <input type="password" id="apiKey" class="settings-input" placeholder="ËæìÂÖ•APIÂØÜÈí•" value="sk-xxxxxxxx">
                        </div>
                        <div class="settings-item">
                            <div class="item-label">ËØ∑Ê±ÇË∂ÖÊó∂</div>
                            <select id="apiTimeout" class="settings-select">
                                <option value="5000">5Áßí</option>
                                <option value="10000" selected>10Áßí</option>
                                <option value="30000">30Áßí</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <div class="section-title">ÂäüËÉΩËÆæÁΩÆ</div>
                        <div class="settings-item toggle-item">
                            <div class="item-label">ÂêØÁî®ÁºìÂ≠ò</div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="enableCache" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="settings-item toggle-item">
                            <div class="item-label">Ëá™Âä®ÈáçËØï</div>
                            <label class="toggle-switch">
                                <input type="checkbox" id="autoRetry" checked>
                                <span class="toggle-slider"></span>
                            </label>
                        </div>
                        <div class="settings-item">
                            <div class="item-label">ÈáçËØïÊ¨°Êï∞</div>
                            <select id="retryCount" class="settings-select">
                                <option value="1">1Ê¨°</option>
                                <option value="2">2Ê¨°</option>
                                <option value="3" selected>3Ê¨°</option>
                            </select>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <div class="section-title">ÊµãËØïËøûÊé•</div>
                        <div class="settings-item">
                            <button id="testConnection" class="test-button">ÊµãËØïAPIËøûÊé•</button>
                        </div>
                        <div class="settings-item">
                            <div id="connectionStatus" class="status-text">Êú™ÊµãËØï</div>
                        </div>
                    </div>
                    
                    <div class="settings-section">
                        <div class="section-title">Êï∞ÊçÆÁÆ°ÁêÜ</div>
                        <div class="settings-item">
                            <button id="saveSettings" class="action-button primary">‰øùÂ≠òËÆæÁΩÆ</button>
                        </div>
                        <div class="settings-item">
                            <button id="resetSettings" class="action-button secondary">ÊÅ¢Â§çÈªòËÆ§</button>
                        </div>
                        <div class="settings-item">
                            <button id="clearCache" class="action-button secondary">Ê∏ÖÈô§ÁºìÂ≠ò</button>
                        </div>
                    </div>

                    <!-- Ê®°ÂûãÁÆ°ÁêÜÈÉ®ÂàÜ -->
                    <div class="settings-section">
                        <div class="section-title">Ê®°ÂûãÁÆ°ÁêÜ</div>
                        
                        <!-- Ê®°ÂûãÂàóË°®ÊòæÁ§∫ -->
                        <div class="settings-item" style="flex-direction: column; align-items: stretch;">
                            <div class="model-list" id="modelList">
                                <div class="model-item">
                                    <div class="model-info">
                                        <div class="model-name">GPT-4</div>
                                        <div class="model-id">gpt-4</div>
                                    </div>
                                    <div class="model-status available">Â∑≤‰∏ãËΩΩ</div>
                                </div>
                                <div class="model-item">
                                    <div class="model-info">
                                        <div class="model-name">GPT-3.5 Turbo</div>
                                        <div class="model-id">gpt-3.5-turbo</div>
                                    </div>
                                    <div class="model-status available">Â∑≤‰∏ãËΩΩ</div>
                                </div>
                                <div class="model-item">
                                    <div class="model-info">
                                        <div class="model-name">Claude 3</div>
                                        <div class="model-id">claude-3</div>
                                    </div>
                                    <div class="model-status not-downloaded">Êú™‰∏ãËΩΩ</div>
                                </div>
                                <div class="model-item">
                                    <div class="model-info">
                                        <div class="model-name">Llama 2 70B</div>
                                        <div class="model-id">llama-2-70b</div>
                                    </div>
                                    <div class="model-status not-downloaded">Êú™‰∏ãËΩΩ</div>
                                </div>
                                <div class="model-item">
                                    <div class="model-info">
                                        <div class="model-name">Mistral 7B</div>
                                        <div class="model-id">mistral-7b</div>
                                    </div>
                                    <div class="model-status not-downloaded">Êú™‰∏ãËΩΩ</div>
                                </div>
                                <div class="model-item">
                                    <div class="model-info">
                                        <div class="model-name">CodeLlama 34B</div>
                                        <div class="model-id">codellama-34b</div>
                                    </div>
                                    <div class="model-status not-downloaded">Êú™‰∏ãËΩΩ</div>
                                </div>
                            </div>
                        </div>
                        
                        <!-- Ê®°ÂûãÊìç‰ΩúÊåâÈíÆ -->
                        <div class="settings-item" style="flex-direction: column; align-items: stretch;">
                            <button id="refreshModels" class="action-button primary" style="margin-bottom: 8px;">
                                üîÑ Âà∑Êñ∞Ê®°ÂûãÂàóË°®
                            </button>
                            <button id="downloadModel" class="action-button secondary">
                                ‚¨áÔ∏è ‰∏ãËΩΩÈÄâ‰∏≠Ê®°Âûã
                            </button>
                        </div>
                        
                        <!-- ÊâãÂä®Ê∑ªÂä†Ê®°Âûã -->
                        <div class="settings-item" style="flex-direction: column; align-items: stretch;">
                            <input type="text" id="customModelName" class="settings-input" placeholder="Ê®°ÂûãÂêçÁß∞" style="margin-bottom: 8px;">
                            <input type="text" id="customModelId" class="settings-input" placeholder="Ê®°ÂûãID" style="margin-bottom: 8px;">
                            <button id="addCustomModel" class="action-button secondary">‚ûï Ê∑ªÂä†Ëá™ÂÆö‰πâÊ®°Âûã</button>
                        </div>
                        
                        <!-- Ê®°Âûã‰∏ãËΩΩËøõÂ∫¶ -->
                        <div class="settings-item" style="flex-direction: column; align-items: stretch; display: none;" id="downloadProgressContainer">
                            <div class="progress-info">
                                <div class="progress-text">‰∏ãËΩΩ‰∏≠: <span id="downloadingModel">GPT-4</span></div>
                                <div class="progress-percent" id="downloadPercent">0%</div>
                            </div>
                            <div class="progress-bar">
                                <div class="progress-fill" id="progressFill" style="width: 0%"></div>
                            </div>
                            <button id="cancelDownload" class="action-button secondary" style="margin-top: 8px;">‚ùå ÂèñÊ∂à‰∏ãËΩΩ</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // Ê£ÄÊµãÊòØÂê¶Âú®ÂÖ®Â±èÊ®°Âºè‰∏ãËøêË°å
        function isInStandaloneMode() {
            return (window.matchMedia('(display-mode: standalone)').matches) || 
                   (window.navigator.standalone) || 
                   (document.referrer.includes('android-app://'));
        }

        // Â∫îÁî®ÂÖ®Â±è‰ºòÂåñ
        if (isInStandaloneMode()) {
            document.documentElement.classList.add('standalone-mode');
            
            // ÈöêËóèÁä∂ÊÄÅÊ†èÂå∫ÂüüÔºàÂ¶ÇÊûúÈúÄË¶ÅÔºâ
            const statusBar = document.querySelector('.status-bar');
            if (statusBar) {
                statusBar.style.display = 'none';
            }
        }

        // Âåó‰∫¨ÂÆûÊó∂Êó∂Èó¥Êõ¥Êñ∞ÂáΩÊï∞
        function updateBeijingTime() {
            const now = new Date();
            const beijingTime = new Date(now.getTime() + (now.getTimezoneOffset() + 480) * 60000);
            
            const hours = String(beijingTime.getHours()).padStart(2, '0');
            const minutes = String(beijingTime.getMinutes()).padStart(2, '0');
            const timeStr = `${hours}:${minutes}`;
            
            const weekDays = ['Êó•', '‰∏Ä', '‰∫å', '‰∏â', 'Âõõ', '‰∫î', 'ÂÖ≠'];
            const weekDay = weekDays[beijingTime.getDay()];
            const month = beijingTime.getMonth() + 1;
            const date = beijingTime.getDate();
            const dateStr = `ÊòüÊúü${weekDay} ${month}Êúà${date}Êó•`;
            
            document.getElementById('statusTime').textContent = timeStr;
            document.getElementById('lockTime').textContent = timeStr;
            document.getElementById('lockDate').textContent = dateStr;
            document.getElementById('wechatStatusTime').textContent = timeStr;
            document.getElementById('settingsStatusTime').textContent = timeStr;
            document.getElementById('walletStatusTime').textContent = timeStr;
        }

        // ÂàùÂßãÂåñÊó∂Èó¥Âπ∂ÊØèÁßíÊõ¥Êñ∞
        updateBeijingTime();
        setInterval(updateBeijingTime, 1000);

        // ÊªëÂä®Ëß£ÈîÅÈÄªËæë
        const slideToUnlock = document.getElementById('slideToUnlock');
        const screen = document.getElementById('screen');
        let isDragging = false;
        let startX = 0;
        const unlockThreshold = window.innerWidth * 0.4;

        slideToUnlock.addEventListener('mousedown', startDrag);
        slideToUnlock.addEventListener('touchstart', startDrag);
        document.addEventListener('mousemove', drag);
        document.addEventListener('touchmove', drag, { passive: true });
        document.addEventListener('mouseup', endDrag);
        document.addEventListener('touchend', endDrag);

        function startDrag(e) {
            isDragging = true;
            startX = e.type === 'mousedown' ? e.clientX : e.touches[0].clientX;
            slideToUnlock.style.cursor = 'grabbing';
        }

        function drag(e) {
            if (!isDragging) return;
            const currentX = e.type === 'mousemove' ? e.clientX : e.touches[0].clientX;
            const dragDistance = currentX - startX;
            
            if (dragDistance > 0) {
                slideToUnlock.querySelector('.slide-icon').style.transform = `translateX(${dragDistance}px)`;
                slideToUnlock.style.opacity = 0.8 - (dragDistance / unlockThreshold) * 0.3;
            }
        }

        function endDrag(e) {
            const currentX = e.type === 'mouseup' ? e.clientX : e.changedTouches[0].clientX;
            const dragDistance = currentX - startX;
            
            if (dragDistance >= unlockThreshold) {
                screen.classList.add('unlocked');
            } else {
                slideToUnlock.querySelector('.slide-icon').style.transform = 'translateX(0)';
                slideToUnlock.style.opacity = 0.8;
            }
            
            isDragging = false;
            slideToUnlock.style.cursor = 'grab';
        }

        // ÂèåÂáª‰∏ªÈ°µËøîÂõûÈîÅÂ±è
        document.getElementById('homeScreen').addEventListener('dblclick', () => {
            screen.classList.remove('unlocked');
            screen.classList.remove('wechat-opened');
            screen.classList.remove('wallet-opened');
            screen.classList.remove('settings-opened');
        });

        // ÂæÆ‰ø°ÂõæÊ†áÁÇπÂáª‰∫ã‰ª∂
        document.getElementById('wechatIcon').addEventListener('click', () => {
            screen.classList.add('wechat-opened');
        });

        // ËÆæÁΩÆÂõæÊ†áÁÇπÂáª‰∫ã‰ª∂
        document.getElementById('settingsIcon').addEventListener('click', () => {
            screen.classList.add('settings-opened');
        });

        // ËøîÂõûÊåâÈíÆ‰∫ã‰ª∂
        document.getElementById('wechatBackBtn').addEventListener('click', () => {
            screen.classList.remove('wechat-opened');
        });

        // Èí±ÂåÖËøîÂõûÊåâÈíÆ
        document.getElementById('walletBackBtn').addEventListener('click', () => {
            screen.classList.remove('wallet-opened');
        });

        // ËÆæÁΩÆÈ°µÈù¢ËøîÂõûÊåâÈíÆ
        document.getElementById('settingsBackBtn').addEventListener('click', () => {
            screen.classList.remove('settings-opened');
        });

        // Â∫ïÈÉ®ÂØºËà™ÂàáÊç¢ÂäüËÉΩ
        const navItems = document.querySelectorAll('.nav-item');
        const contentPages = document.querySelectorAll('.content-page');

        navItems.forEach(item => {
            item.addEventListener('click', function() {
                // ÁßªÈô§ÊâÄÊúâactiveÁ±ª
                navItems.forEach(nav => nav.classList.remove('active'));
                contentPages.forEach(page => page.classList.remove('active'));
                
                // Ê∑ªÂä†ÂΩìÂâçactiveÁ±ª
                this.classList.add('active');
                const tabName = this.getAttribute('data-tab');
                document.getElementById(`${tabName}-page`).classList.add('active');
            });
        });

        // Èí±ÂåÖËèúÂçïÈ°πÁÇπÂáª‰∫ã‰ª∂
        document.getElementById('walletMenuItem').addEventListener('click', () => {
            screen.classList.add('wallet-opened');
        });

        // ÊµãËØïAPIËøûÊé•
        document.getElementById('testConnection').addEventListener('click', async () => {
            const statusElement = document.getElementById('connectionStatus');
            const apiUrl = document.getElementById('apiUrl').value;
            
            statusElement.textContent = 'ÊµãËØï‰∏≠...';
            statusElement.className = 'status-text';
            
            try {
                // Ê®°ÊãüAPIÊµãËØï
                await new Promise(resolve => setTimeout(resolve, 2000));
                
                // ÈöèÊú∫Ê®°ÊãüÊàêÂäüÊàñÂ§±Ë¥•
                const isSuccess = Math.random() > 0.3;
                
                if (isSuccess) {
                    statusElement.textContent = 'ËøûÊé•ÊàêÂäü ‚úì';
                    statusElement.className = 'status-text connected';
                } else {
                    statusElement.textContent = 'ËøûÊé•Â§±Ë¥• ‚úó';
                    statusElement.className = 'status-text error';
                }
            } catch (error) {
                statusElement.textContent = 'ËøûÊé•ÈîôËØØ ‚úó';
                statusElement.className = 'status-text error';
            }
        });

        // ‰øùÂ≠òËÆæÁΩÆ
        document.getElementById('saveSettings').addEventListener('click', () => {
            const settings = {
                apiUrl: document.getElementById('apiUrl').value,
                apiKey: document.getElementById('apiKey').value,
                timeout: document.getElementById('apiTimeout').value,
                enableCache: document.getElementById('enableCache').checked,
                autoRetry: document.getElementById('autoRetry').checked,
                retryCount: document.getElementById('retryCount').value
            };
            
            localStorage.setItem('apiSettings', JSON.stringify(settings));
            alert('ËÆæÁΩÆÂ∑≤‰øùÂ≠òÔºÅ');
        });

        // ÊÅ¢Â§çÈªòËÆ§ËÆæÁΩÆ
        document.getElementById('resetSettings').addEventListener('click', () => {
            if (confirm('Á°ÆÂÆöË¶ÅÊÅ¢Â§çÈªòËÆ§ËÆæÁΩÆÂêóÔºü')) {
                document.getElementById('apiUrl').value = 'https://api.example.com';
                document.getElementById('apiKey').value = 'sk-xxxxxxxx';
                document.getElementById('apiTimeout').value = '10000';
                document.getElementById('enableCache').checked = true;
                document.getElementById('autoRetry').checked = true;
                document.getElementById('retryCount').value = '3';
            }
        });

        // Ê∏ÖÈô§ÁºìÂ≠ò
        document.getElementById('clearCache').addEventListener('click', () => {
            if (confirm('Á°ÆÂÆöË¶ÅÊ∏ÖÈô§ÊâÄÊúâÁºìÂ≠òÂêóÔºü')) {
                localStorage.removeItem('apiSettings');
                alert('ÁºìÂ≠òÂ∑≤Ê∏ÖÈô§ÔºÅ');
            }
        });

        // Âä†ËΩΩ‰øùÂ≠òÁöÑËÆæÁΩÆ
        function loadSettings() {
            const savedSettings = localStorage.getItem('apiSettings');
            if (savedSettings) {
                const settings = JSON.parse(savedSettings);
                document.getElementById('apiUrl').value = settings.apiUrl || 'https://api.example.com';
                document.getElementById('apiKey').value = settings.apiKey || 'sk-xxxxxxxx';
                document.getElementById('apiTimeout').value = settings.timeout || '10000';
                document.getElementById('enableCache').checked = settings.enableCache !== false;
                document.getElementById('autoRetry').checked = settings.autoRetry !== false;
                document.getElementById('retryCount').value = settings.retryCount || '3';
            }
        }

        // È°µÈù¢Âä†ËΩΩÊó∂Âä†ËΩΩËÆæÁΩÆ
        document.addEventListener('DOMContentLoaded', loadSettings);

        // APIÈ¢ÑËÆæÁÆ°ÁêÜÂäüËÉΩ
        document.addEventListener('DOMContentLoaded', function() {
            initPresetManager();
        });

        function initPresetManager() {
            const presetSelector = document.getElementById('presetSelector');
            const presetConfigs = document.getElementById('presetConfigs');
            const applyPresetBtn = document.getElementById('applyPreset');
            const saveCurrentAsPresetBtn = document.getElementById('saveCurrentAsPreset');
            const createNewPresetBtn = document.getElementById('createNewPreset');
            const newPresetNameInput = document.getElementById('newPresetName');

            // È¢ÑËÆæÊï∞ÊçÆ
            const defaultPresets = {
                custom: { name: "Ëá™ÂÆö‰πâÈÖçÁΩÆ", url: "", key: "", isCustom: true },
                preset1: { name: "OpenAIÂÆòÊñπ", url: "https://api.openai.com/v1", key: "", description: "ÂÆòÊñπAPI" },
                preset2: { name: "ÂõΩÂÜÖ‰ª£ÁêÜ1", url: "https://api.aimlapi.com/v1", key: "", description: "Á®≥ÂÆö‰ª£ÁêÜ" },
                preset3: { name: "ÂõΩÂÜÖ‰ª£ÁêÜ2", url: "https://chatgpt.proxy/v1", key: "", description: "È´òÈÄü‰ª£ÁêÜ" }
            };

            // Âä†ËΩΩ‰øùÂ≠òÁöÑÈ¢ÑËÆæ
            function loadPresets() {
                const savedPresets = localStorage.getItem('apiPresets');
                if (savedPresets) {
                    const presets = JSON.parse(savedPresets);
                    Object.assign(defaultPresets, presets);
                    updatePresetSelector();
                }
            }

            // Êõ¥Êñ∞È¢ÑËÆæÈÄâÊã©Âô®
            function updatePresetSelector() {
                presetSelector.innerHTML = '<option value="custom">Ëá™ÂÆö‰πâÈÖçÁΩÆ</option>';
                
                Object.keys(defaultPresets).forEach(presetId => {
                    if (presetId !== 'custom') {
                        const preset = defaultPresets[presetId];
                        const option = document.createElement('option');
                        option.value = presetId;
                        option.textContent = preset.name;
                        if (preset.description) {
                            option.textContent += ` (${preset.description})`;
                        }
                        presetSelector.appendChild(option);
                    }
                });
            }

            // ÊòæÁ§∫ÂΩìÂâçÈ¢ÑËÆæÈÖçÁΩÆ
            function showPresetConfig(presetId) {
                // ÈöêËóèÊâÄÊúâÈ¢ÑËÆæÈÖçÁΩÆ
                document.querySelectorAll('.preset-config').forEach(config => {
                    config.style.display = 'none';
                });
                
                // ÊòæÁ§∫ÈÄâ‰∏≠ÁöÑÈ¢ÑËÆæÈÖçÁΩÆ
                const selectedConfig = document.querySelector(`.preset-config[data-preset="${presetId}"]`);
                if (selectedConfig) {
                    selectedConfig.style.display = 'block';
                }
                
                // Â¶ÇÊûúÊòØËá™ÂÆö‰πâÈÖçÁΩÆÔºåÈöêËóèÈ¢ÑËÆæÈÖçÁΩÆÂå∫Âüü
                if (presetId === 'custom') {
                    presetConfigs.style.display = 'none';
                } else {
                    presetConfigs.style.display = 'block';
                }
            }

            // Â∫îÁî®È¢ÑËÆæ
            function applyPreset(presetId) {
                const preset = defaultPresets[presetId];
                if (preset) {
                    document.getElementById('apiUrl').value = preset.url;
                    document.getElementById('apiKey').value = preset.key || '';
                    
                    // ÊòæÁ§∫ÊàêÂäüÊèêÁ§∫
                    showToast(`Â∑≤Â∫îÁî®È¢ÑËÆæ: ${preset.name}`);
                }
            }

            // ‰øùÂ≠òÂΩìÂâçÈÖçÁΩÆ‰∏∫È¢ÑËÆæ
            function saveCurrentAsPreset() {
                const currentPresetId = presetSelector.value;
                if (currentPresetId === 'custom') {
                    alert('ËØ∑ÂÖàÈÄâÊã©‰∏Ä‰∏™È¢ÑËÆæÊàñÂàõÂª∫Êñ∞È¢ÑËÆæ');
                    return;
                }

                const currentUrl = document.getElementById('apiUrl').value;
                const currentKey = document.getElementById('apiKey').value;

                defaultPresets[currentPresetId].url = currentUrl;
                defaultPresets[currentPresetId].key = currentKey;

                // ‰øùÂ≠òÂà∞localStorage
                localStorage.setItem('apiPresets', JSON.stringify(defaultPresets));
                
                showToast(`È¢ÑËÆæÂ∑≤Êõ¥Êñ∞: ${defaultPresets[currentPresetId].name}`);
            }

            // ÂàõÂª∫Êñ∞È¢ÑËÆæ
            function createNewPreset() {
                const name = newPresetNameInput.value.trim();
                if (!name) {
                    alert('ËØ∑ËæìÂÖ•È¢ÑËÆæÂêçÁß∞');
                    return;
                }

                const newPresetId = 'preset_' + Date.now();
                const currentUrl = document.getElementById('apiUrl').value;
                const currentKey = document.getElementById('apiKey').value;

                defaultPresets[newPresetId] = {
                    name: name,
                    url: currentUrl,
                    key: currentKey,
                    description: 'Ëá™ÂÆö‰πâÈ¢ÑËÆæ'
                };

                // ‰øùÂ≠òÂà∞localStorage
                localStorage.setItem('apiPresets', JSON.stringify(defaultPresets));
                
                // Êõ¥Êñ∞ÈÄâÊã©Âô®
                updatePresetSelector();
                
                // ÈÄâ‰∏≠Êñ∞È¢ÑËÆæ
                presetSelector.value = newPresetId;
                showPresetConfig(newPresetId);
                
                // Ê∏ÖÁ©∫ËæìÂÖ•Ê°Ü
                newPresetNameInput.value = '';
                
                showToast(`Â∑≤ÂàõÂª∫Êñ∞È¢ÑËÆæ: ${name}`);
            }

            // ÊòæÁ§∫ÊèêÁ§∫‰ø°ÊÅØ
            function showToast(message) {
                // ÂàõÂª∫ÊèêÁ§∫ÂÖÉÁ¥†
                let toast = document.getElementById('presetToast');
                if (!toast) {
                    toast = document.createElement('div');
                    toast.id = 'presetToast';
                    toast.style.cssText = `
                        position: fixed;
                        top: 50%;
                        left: 50%;
                        transform: translate(-50%, -50%);
                        background: rgba(0,0,0,0.8);
                        color: white;
                        padding: 12px 20px;
                        border-radius: 8px;
                        z-index: 1000;
                        font-size: 14px;
                        transition: opacity 0.3s;
                    `;
                    document.body.appendChild(toast);
                }
                
                toast.textContent = message;
                toast.style.opacity = '1';
                
                // 2ÁßíÂêéÈöêËóè
                setTimeout(() => {
                    toast.style.opacity = '0';
                }, 2000);
            }

            // ‰∫ã‰ª∂ÁõëÂê¨
            presetSelector.addEventListener('change', function() {
                const presetId = this.value;
                showPresetConfig(presetId);
                
                // Â¶ÇÊûúÊòØÈ¢ÑËÆæÔºàÈùûËá™ÂÆö‰πâÔºâÔºåËá™Âä®Â°´ÂÖÖÊï∞ÊçÆ‰ΩÜ‰∏çÂ∫îÁî®
                if (presetId !== 'custom') {
                    const preset = defaultPresets[presetId];
                    const presetUrlInput = document.querySelector(`.preset-config[data-preset="${presetId}"] .preset-api-url`);
                    const presetKeyInput = document.querySelector(`.preset-config[data-preset="${presetId}"] .preset-api-key`);
                    
                    if (presetUrlInput) presetUrlInput.value = preset.url;
                    if (presetKeyInput) presetKeyInput.value = preset.key || '';
                }
            });

            applyPresetBtn.addEventListener('click', function() {
                const presetId = presetSelector.value;
                if (presetId !== 'custom') {
                    applyPreset(presetId);
                }
            });

            saveCurrentAsPresetBtn.addEventListener('click', saveCurrentAsPreset);
            createNewPresetBtn.addEventListener('click', createNewPreset);

            // ÂàùÂßãÂåñ
            loadPresets();
            showPresetConfig('custom'); // ÈªòËÆ§ÊòæÁ§∫Ëá™ÂÆö‰πâÈÖçÁΩÆ
        }

        // Ê®°ÂûãÁÆ°ÁêÜÂäüËÉΩ
        document.addEventListener('DOMContentLoaded', function() {
            initModelManager();
        });

        function initModelManager() {
            const modelList = document.getElementById('modelList');
            const refreshModelsBtn = document.getElementById('refreshModels');
            const downloadModelBtn = document.getElementById('downloadModel');
            const addCustomModelBtn = document.getElementById('addCustomModel');
            const customModelName = document.getElementById('customModelName');
            const customModelId = document.getElementById('customModelId');
            const downloadProgressContainer = document.getElementById('downloadProgressContainer');
            const downloadingModel = document.getElementById('downloadingModel');
            const downloadPercent = document.getElementById('downloadPercent');
            const progressFill = document.getElementById('progressFill');
            const cancelDownloadBtn = document.getElementById('cancelDownload');

            let selectedModel = null;
            let isDownloading = false;
            let downloadProgress = 0;

            // ÈªòËÆ§Ê®°ÂûãÂàóË°®
            const defaultModels = [
                { id: 'gpt-4', name: 'GPT-4', downloaded: true },
                { id: 'gpt-3.5-turbo', name: 'GPT-3.5 Turbo', downloaded: true },
                { id: 'claude-3', name: 'Claude 3', downloaded: false },
                { id: 'llama-2-70b', name: 'Llama 2 70B', downloaded: false },
                { id: 'mistral-7b', name: 'Mistral 7B', downloaded: false },
                { id: 'codellama-34b', name: 'CodeLlama 34B', downloaded: false }
            ];

            // Âä†ËΩΩÊ®°ÂûãÊï∞ÊçÆ
            function loadModels() {
                const savedModels = localStorage.getItem('modelList');
                if (savedModels) {
                    const models = JSON.parse(savedModels);
                    renderModelList(models);
                } else {
                    renderModelList(defaultModels);
                    saveModels(defaultModels);
                }
            }

            // ‰øùÂ≠òÊ®°ÂûãÊï∞ÊçÆ
            function saveModels(models) {
                localStorage.setItem('modelList', JSON.stringify(models));
            }

            // Ê∏≤ÊüìÊ®°ÂûãÂàóË°®
            function renderModelList(models) {
                modelList.innerHTML = '';
                
                models.forEach(model => {
                    const modelItem = document.createElement('div');
                    modelItem.className = `model-item ${model.downloaded ? 'available' : 'not-downloaded'}`;
                    if (selectedModel && selectedModel.id === model.id) {
                        modelItem.classList.add('selected');
                    }
                    
                    modelItem.innerHTML = `
                        <div class="model-info">
                            <div class="model-name">${model.name}</div>
                            <div class="model-id">${model.id}</div>
                        </div>
                        <div class="model-status ${model.downloaded ? 'available' : 'not-downloaded'}">
                            ${model.downloaded ? 'Â∑≤‰∏ãËΩΩ' : 'Êú™‰∏ãËΩΩ'}
                        </div>
                    `;
                    
                    modelItem.addEventListener('click', () => {
                        selectModel(model);
                    });
                    
                    modelList.appendChild(modelItem);
                });
            }

            // ÈÄâÊã©Ê®°Âûã
            function selectModel(model) {
                selectedModel = model;
                
                // Êõ¥Êñ∞UIÈÄâ‰∏≠Áä∂ÊÄÅ
                document.querySelectorAll('.model-item').forEach(item => {
                    item.classList.remove('selected');
                });
                
                event.currentTarget.classList.add('selected');
                
                // Êõ¥Êñ∞‰∏ãËΩΩÊåâÈíÆÁä∂ÊÄÅ
                downloadModelBtn.disabled = model.downloaded;
                downloadModelBtn.textContent = model.downloaded ? '‚úÖ Â∑≤‰∏ãËΩΩ' : '‚¨áÔ∏è ‰∏ãËΩΩÊ≠§Ê®°Âûã';
            }

            // Âà∑Êñ∞Ê®°ÂûãÂàóË°®
            function refreshModels() {
                showToast('Ê≠£Âú®Âà∑Êñ∞Ê®°ÂûãÂàóË°®...');
                
                // Ê®°ÊãüAPIË∞ÉÁî®Ëé∑ÂèñÊúÄÊñ∞Ê®°ÂûãÂàóË°®
                setTimeout(() => {
                    const updatedModels = [
                        ...defaultModels,
                        { id: 'new-model-1', name: 'ÊúÄÊñ∞Ê®°Âûã v1.0', downloaded: false },
                        { id: 'new-model-2', name: 'ÊúÄÊñ∞Ê®°Âûã v2.0', downloaded: false }
                    ];
                    
                    renderModelList(updatedModels);
                    saveModels(updatedModels);
                    showToast('Ê®°ÂûãÂàóË°®Â∑≤Êõ¥Êñ∞ÔºÅ');
                }, 1500);
            }

            // ‰∏ãËΩΩÊ®°Âûã
            function downloadModel() {
                if (!selectedModel || selectedModel.downloaded || isDownloading) {
                    return;
                }

                isDownloading = true;
                downloadProgress = 0;
                
                // ÊòæÁ§∫‰∏ãËΩΩËøõÂ∫¶
                downloadProgressContainer.style.display = 'block';
                downloadingModel.textContent = selectedModel.name;
                updateProgress(0);
                
                // Ê®°Êãü‰∏ãËΩΩËøáÁ®ã
                const downloadInterval = setInterval(() => {
                    downloadProgress += Math.random() * 10;
                    if (downloadProgress >= 100) {
                        downloadProgress = 100;
                        clearInterval(downloadInterval);
                        downloadComplete();
                    }
                    updateProgress(downloadProgress);
                }, 200);
                
                // ‰øùÂ≠ò‰∏ãËΩΩËøõÂ∫¶ÂºïÁî®ÔºåÁî®‰∫éÂèñÊ∂à
                selectedModel.downloadInterval = downloadInterval;
            }

            // Êõ¥Êñ∞‰∏ãËΩΩËøõÂ∫¶
            function updateProgress(percent) {
                downloadPercent.textContent = `${Math.round(percent)}%`;
                progressFill.style.width = `${percent}%`;
            }

            // ‰∏ãËΩΩÂÆåÊàê
            function downloadComplete() {
                isDownloading = false;
                
                // Êõ¥Êñ∞Ê®°ÂûãÁä∂ÊÄÅ
                const models = JSON.parse(localStorage.getItem('modelList') || '[]');
                const updatedModels = models.map(model => {
                    if (model.id === selectedModel.id) {
                        return { ...model, downloaded: true };
                    }
                    return model;
                });
                
                saveModels(updatedModels);
                renderModelList(updatedModels);
                
                // ÈöêËóèËøõÂ∫¶Êù°
                setTimeout(() => {
                    downloadProgressContainer.style.display = 'none';
                }, 2000);
                
                showToast(`Ê®°Âûã "${selectedModel.name}" ‰∏ãËΩΩÂÆåÊàêÔºÅ`);
            }

            // ÂèñÊ∂à‰∏ãËΩΩ
            function cancelDownload() {
                if (selectedModel && selectedModel.downloadInterval) {
                    clearInterval(selectedModel.downloadInterval);
                }
                
                isDownloading = false;
                downloadProgressContainer.style.display = 'none';
                showToast('‰∏ãËΩΩÂ∑≤ÂèñÊ∂à');
            }

            // Ê∑ªÂä†Ëá™ÂÆö‰πâÊ®°Âûã
            function addCustomModel() {
                const name = customModelName.value.trim();
                const id = customModelId.value.trim();
                
                if (!name || !id) {
                    alert('ËØ∑ËæìÂÖ•Ê®°ÂûãÂêçÁß∞ÂíåID');
                    return;
                }

                const models = JSON.parse(localStorage.getItem('modelList') || '[]');
                const newModel = {
                    id: id,
                    name: name,
                    downloaded: false
                };
                
                models.push(newModel);
                saveModels(models);
                renderModelList(models);
                
                // Ê∏ÖÁ©∫ËæìÂÖ•Ê°Ü
                customModelName.value = '';
                customModelId.value = '';
                
                showToast(`Ëá™ÂÆö‰πâÊ®°Âûã "${name}" Â∑≤Ê∑ªÂä†`);
            }

            // ‰∫ã‰ª∂ÁõëÂê¨
            refreshModelsBtn.addEventListener('click', refreshModels);
            downloadModelBtn.addEventListener('click', downloadModel);
            addCustomModelBtn.addEventListener('click', addCustomModel);
            cancelDownloadBtn.addEventListener('click', cancelDownload);

            // ÂàùÂßãÂåñ
            loadModels();
        }

        // Â∑¶ÊªëÂà†Èô§ÂäüËÉΩ
        function initChatDelete() {
            const chatList = document.getElementById('chatList');
            const deleteModal = document.getElementById('deleteModal');
            const cancelDeleteBtn = document.getElementById('cancelDelete');
            const confirmDeleteBtn = document.getElementById('confirmDelete');
            
            let startX = 0;
            let currentX = 0;
            let isSwiping = false;
            let currentChatItem = null;
            const swipeThreshold = 60; // ÊªëÂä®ÈòàÂÄº

            // Ê£ÄÊü•Á©∫Áä∂ÊÄÅ
            function checkEmptyState() {
                const chatList = document.getElementById('chatList');
                const emptyState = document.getElementById('emptyState');
                const chatItems = chatList.querySelectorAll('.chat-item');
                
                if (chatItems.length === 0) {
                    chatList.classList.add('empty');
                    emptyState.classList.add('show');
                } else {
                    chatList.classList.remove('empty');
                    emptyState.classList.remove('show');
                }
            }

            // ÊòæÁ§∫Âà†Èô§Á°ÆËÆ§ÂºπÁ™ó
            function showDeleteModal(chatItem) {
                currentChatItem = chatItem;
                deleteModal.classList.add('show');
            }

            // ÈöêËóèÂà†Èô§Á°ÆËÆ§ÂºπÁ™ó
            function hideDeleteModal() {
                deleteModal.classList.remove('show');
                resetSwipe();
            }

            // ÈáçÁΩÆÊªëÂä®Áä∂ÊÄÅ
            function resetSwipe() {
                document.querySelectorAll('.chat-item').forEach(item => {
                    item.classList.remove('swiped');
                    item.querySelector('.chat-item-content').style.transform = 'translateX(0)';
                });
                currentChatItem = null;
            }

            // Âà†Èô§ËÅäÂ§©
            function deleteChat() {
                if (currentChatItem) {
                    // Ëé∑ÂèñËÅäÂ§©È°πÈ´òÂ∫¶Áî®‰∫éÂä®Áîª
                    const itemHeight = currentChatItem.offsetHeight;
                    
                    // Ê∑ªÂä†Âà†Èô§Âä®Áîª
                    currentChatItem.style.cssText = `
                        transition: all 0.3s ease;
                        transform: translateX(-100%);
                        opacity: 0;
                        height: ${itemHeight}px;
                        margin: 0;
                        padding: 12px 15px;
                        overflow: hidden;
                    `;
                    
                    setTimeout(() => {
                        currentChatItem.style.height = '0';
                        currentChatItem.style.margin = '0';
                        currentChatItem.style.padding = '0';
                    }, 50);
                    
                    setTimeout(() => {
                        if (currentChatItem && currentChatItem.parentNode) {
                            currentChatItem.remove();
                            showToast('ËÅäÂ§©Â∑≤Âà†Èô§');
                            
                            // Ê£ÄÊü•ÊòØÂê¶ËøòÊúâËÅäÂ§©È°π
                            checkEmptyState();
                        }
                    }, 350);
                }
                hideDeleteModal();
            }

            // Ëß¶Êë∏ÂºÄÂßã
            function handleTouchStart(e) {
                const chatItem = e.target.closest('.chat-item');
                if (!chatItem) return;

                // Â¶ÇÊûúÂ∑≤ÁªèÊúâÂÖ∂‰ªñÈ°πÂ§Ñ‰∫éÊªëÂä®Áä∂ÊÄÅÔºåÂÖàÈáçÁΩÆ
                const swipedItem = document.querySelector('.chat-item.swiped');
                if (swipedItem && swipedItem !== chatItem) {
                    swipedItem.classList.remove('swiped');
                    swipedItem.querySelector('.chat-item-content').style.transform = 'translateX(0)';
                }

                startX = e.touches[0].clientX;
                currentChatItem = chatItem;
                isSwiping = true;
                
                // ÈáçÁΩÆtransform
                chatItem.querySelector('.chat-item-content').style.transition = 'none';
            }

            // Ëß¶Êë∏ÁßªÂä®
            function handleTouchMove(e) {
                if (!isSwiping || !currentChatItem) return;

                currentX = e.touches[0].clientX;
                const diffX = startX - currentX;

                // Âè™ÂÖÅËÆ∏ÂêëÂ∑¶ÊªëÂä®
                if (diffX > 0) {
                    const translateX = Math.min(diffX, 80); // ÊúÄÂ§ßÊªëÂä®80px
                    currentChatItem.querySelector('.chat-item-content').style.transform = `translateX(-${translateX}px)`;
                    
                    // ÊòæÁ§∫/ÈöêËóèÂà†Èô§ÊåâÈíÆ
                    if (diffX > swipeThreshold) {
                        currentChatItem.classList.add('swiped');
                    } else {
                        currentChatItem.classList.remove('swiped');
                    }
                }
            }

            // Ëß¶Êë∏ÁªìÊùü
            function handleTouchEnd(e) {
                if (!isSwiping || !currentChatItem) return;

                const diffX = startX - currentX;
                
                // Ê∑ªÂä†ËøáÊ∏°ÊïàÊûú
                currentChatItem.querySelector('.chat-item-content').style.transition = 'transform 0.3s ease';
                
                if (diffX > swipeThreshold) {
                    // ÊªëÂä®Ë∂≥Â§üË∑ùÁ¶ªÔºå‰øùÊåÅÂà†Èô§ÊåâÈíÆÂèØËßÅ
                    currentChatItem.classList.add('swiped');
                    currentChatItem.querySelector('.chat-item-content').style.transform = 'translateX(-80px)';
                } else {
                    // ÊªëÂä®Ë∑ùÁ¶ª‰∏çÂ§üÔºåÊÅ¢Â§çÂéüÁä∂
                    currentChatItem.querySelector('.chat-item-content').style.transform = 'translateX(0)';
                    currentChatItem.classList.remove('swiped');
                }

                isSwiping = false;
                
                // ÈáçÁΩÆËß¶Êë∏Ê†áËØÜ
                currentChatItem = null;
            }

            // Èº†Ê†á‰∫ã‰ª∂ÔºàÁî®‰∫éÊ°åÈù¢ÊµãËØïÔºâ
            function handleMouseDown(e) {
                const chatItem = e.target.closest('.chat-item');
                if (!chatItem) return;

                const swipedItem = document.querySelector('.chat-item.swiped');
                if (swipedItem && swipedItem !== chatItem) {
                    swipedItem.classList.remove('swiped');
                    swipedItem.querySelector('.chat-item-content').style.transform = 'translateX(0)';
                }

                startX = e.clientX;
                currentChatItem = chatItem;
                isSwiping = true;

                // ÈáçÁΩÆtransform
                chatItem.querySelector('.chat-item-content').style.transition = 'none';

                document.addEventListener('mousemove', handleMouseMove);
                document.addEventListener('mouseup', handleMouseUp);
            }

            function handleMouseMove(e) {
                if (!isSwiping || !currentChatItem) return;

                currentX = e.clientX;
                const diffX = startX - currentX;

                if (diffX > 0) {
                    const translateX = Math.min(diffX, 80);
                    currentChatItem.querySelector('.chat-item-content').style.transform = `translateX(-${translateX}px)`;
                    
                    if (diffX > swipeThreshold) {
                        currentChatItem.classList.add('swiped');
                    } else {
                        currentChatItem.classList.remove('swiped');
                    }
                }
            }

            function handleMouseUp() {
                if (!isSwiping || !currentChatItem) return;

                const diffX = startX - currentX;
                
                // Ê∑ªÂä†ËøáÊ∏°ÊïàÊûú
                currentChatItem.querySelector('.chat-item-content').style.transition = 'transform 0.3s ease';
                
                if (diffX > swipeThreshold) {
                    currentChatItem.classList.add('swiped');
                    currentChatItem.querySelector('.chat-item-content').style.transform = 'translateX(-80px)';
                } else {
                    currentChatItem.querySelector('.chat-item-content').style.transform = 'translateX(0)';
                    currentChatItem.classList.remove('swiped');
                }

                isSwiping = false;
                document.removeEventListener('mousemove', handleMouseMove);
                document.removeEventListener('mouseup', handleMouseUp);
            }

            // ÁªëÂÆö‰∫ã‰ª∂
            chatList.addEventListener('touchstart', handleTouchStart);
            chatList.addEventListener('touchmove', handleTouchMove);
            chatList.addEventListener('touchend', handleTouchEnd);

            chatList.addEventListener('mousedown', handleMouseDown);

            // ÁÇπÂáªÂà†Èô§ÊåâÈíÆ
            chatList.addEventListener('click', function(e) {
                if (e.target.classList.contains('delete-action')) {
                    const chatItem = e.target.closest('.chat-item');
                    if (chatItem) {
                        showDeleteModal(chatItem);
                    }
                    e.stopPropagation();
                }
            });

            // ÂºπÁ™óÊåâÈíÆ‰∫ã‰ª∂
            cancelDeleteBtn.addEventListener('click', hideDeleteModal);
            confirmDeleteBtn.addEventListener('click', deleteChat);

            // ÁÇπÂáªÂÖ∂‰ªñÂú∞ÊñπÂÖ≥Èó≠ÂºπÁ™ó
            deleteModal.addEventListener('click', function(e) {
                if (e.target === deleteModal) {
                    hideDeleteModal();
                }
            });

            // ÁÇπÂáªËÅäÂ§©ÂàóË°®Â§ñÈÉ®Êó∂ÈáçÁΩÆÊâÄÊúâÊªëÂä®Áä∂ÊÄÅ
            document.addEventListener('click', function(e) {
                if (!e.target.closest('.chat-item')) {
                    resetSwipe();
                }
            });

            // ÂàùÂßãÂåñÊ£ÄÊü•Á©∫Áä∂ÊÄÅ
            checkEmptyState();
        }

        // ÁºñËæëËµÑÊñôÂäüËÉΩ
        function initProfileEdit() {
            const editModal = document.getElementById('editModal');
            const editProfileBtn = document.getElementById('editProfileBtn');
            const closeEditModal = document.getElementById('closeEditModal');
            const cancelEdit = document.getElementById('cancelEdit');
            const saveEdit = document.getElementById('saveEdit');
            const uploadAvatarBtn = document.getElementById('uploadAvatarBtn');
            const avatarInput = document.getElementById('avatarInput');
            const editNameInput = document.getElementById('editNameInput');
            const editIdInput = document.getElementById('editIdInput');
            const editBioInput = document.getElementById('editBioInput');
            
            let selectedAvatarFile = null;

            // ÊòæÁ§∫ÁºñËæëÂºπÁ™ó
            function showEditModal() {
                // Âä†ËΩΩÂΩìÂâçÁî®Êà∑Êï∞ÊçÆ
                loadUserData();
                editModal.classList.add('show');
            }

            // ÈöêËóèÁºñËæëÂºπÁ™ó
            function hideEditModal() {
                editModal.classList.remove('show');
                selectedAvatarFile = null;
            }

            // Âä†ËΩΩÁî®Êà∑Êï∞ÊçÆ
            function loadUserData() {
                const userData = getUserData();
                
                editNameInput.value = userData.name || 'ÂæÆ‰ø°Áî®Êà∑';
                editIdInput.value = userData.id || 'wechat12345';
                editBioInput.value = userData.bio || '';
                
                // Êõ¥Êñ∞Â§¥ÂÉèÈ¢ÑËßà
                updateAvatarPreview(userData.avatar);
            }

            // Ëé∑ÂèñÁî®Êà∑Êï∞ÊçÆ
            function getUserData() {
                return JSON.parse(localStorage.getItem('userProfile') || '{}');
            }

            // ‰øùÂ≠òÁî®Êà∑Êï∞ÊçÆ
            function saveUserData(data) {
                localStorage.setItem('userProfile', JSON.stringify(data));
                updateProfileDisplay();
            }

            // Êõ¥Êñ∞ÁïåÈù¢ÊòæÁ§∫
            function updateProfileDisplay() {
                const userData = getUserData();
                
                // Êõ¥Êñ∞ÂêçÂ≠ó
                document.getElementById('userName').textContent = userData.name || 'ÂæÆ‰ø°Áî®Êà∑';
                
                // Êõ¥Êñ∞ÂæÆ‰ø°Âè∑
                document.getElementById('userId').textContent = `ÂæÆ‰ø°Âè∑: ${userData.id || 'wechat12345'}`;
                
                // Êõ¥Êñ∞Â§¥ÂÉè
                updateMainAvatar(userData.avatar);
            }

            // Êõ¥Êñ∞‰∏ªÂ§¥ÂÉè
            function updateMainAvatar(avatarData) {
                const avatarImage = document.getElementById('avatarImage');
                const avatarText = document.getElementById('avatarText');
                
                if (avatarData) {
                    avatarImage.src = avatarData;
                    avatarImage.style.display = 'block';
                    avatarText.style.display = 'none';
                } else {
                    avatarImage.style.display = 'none';
                    avatarText.style.display = 'block';
                }
            }

            // Êõ¥Êñ∞Â§¥ÂÉèÈ¢ÑËßà
            function updateAvatarPreview(avatarData) {
                const previewImage = document.getElementById('previewImage');
                const previewText = document.getElementById('previewText');
                
                if (avatarData) {
                    previewImage.src = avatarData;
                    previewImage.style.display = 'block';
                    previewText.style.display = 'none';
                } else {
                    previewImage.style.display = 'none';
                    previewText.style.display = 'block';
                }
            }

            // Â§ÑÁêÜÂ§¥ÂÉè‰∏ä‰º†
            function handleAvatarUpload(file) {
                if (!file || !file.type.startsWith('image/')) {
                    showToast('ËØ∑ÈÄâÊã©ÂõæÁâáÊñá‰ª∂');
                    return;
                }

                // Ê£ÄÊü•Êñá‰ª∂Â§ßÂ∞èÔºàÈôêÂà∂2MBÔºâ
                if (file.size > 2 * 1024 * 1024) {
                    showToast('ÂõæÁâáÂ§ßÂ∞è‰∏çËÉΩË∂ÖËøá2MB');
                    return;
                }

                const reader = new FileReader();
                reader.onload = function(e) {
                    // ÁÆÄÂçïË£ÅÂâ™‰∏∫Ê≠£ÊñπÂΩ¢ÔºàÂÆûÈôÖÈ°πÁõÆ‰∏≠ÂèØ‰ª•‰ΩøÁî®Êõ¥Â§çÊùÇÁöÑË£ÅÂâ™Â∫ìÔºâ
                    const img = new Image();
                    img.onload = function() {
                        const canvas = document.createElement('canvas');
                        const size = Math.min(img.width, img.height);
                        canvas.width = 200;
                        canvas.height = 200;
                        
                        const ctx = canvas.getContext('2d');
                        // Â±Ö‰∏≠Ë£ÅÂâ™
                        const sourceX = (img.width - size) / 2;
                        const sourceY = (img.height - size) / 2;
                        
                        ctx.drawImage(img, sourceX, sourceY, size, size, 0, 0, 200, 200);
                        
                        const croppedDataUrl = canvas.toDataURL('image/jpeg', 0.8);
                        updateAvatarPreview(croppedDataUrl);
                        selectedAvatarFile = croppedDataUrl;
                        
                        showToast('Â§¥ÂÉè‰∏ä‰º†ÊàêÂäü');
                    };
                    img.src = e.target.result;
                };
                reader.readAsDataURL(file);
            }

            // ‰øùÂ≠òÁºñËæë
            function saveProfile() {
                const name = editNameInput.value.trim();
                const id = editIdInput.value.trim();
                const bio = editBioInput.value.trim();
                
                if (!name) {
                    showToast('ËØ∑ËæìÂÖ•ÂêçÂ≠ó');
                    return;
                }
                
                if (!id) {
                    showToast('ËØ∑ËæìÂÖ•ÂæÆ‰ø°Âè∑');
                    return;
                }
                
                // Ê£ÄÊü•ÂæÆ‰ø°Âè∑Ê†ºÂºèÔºàÂ≠óÊØç„ÄÅÊï∞Â≠ó„ÄÅ‰∏ãÂàíÁ∫øÔºâ
                if (!/^[a-zA-Z0-9_]+$/.test(id)) {
                    showToast('ÂæÆ‰ø°Âè∑Âè™ËÉΩÂåÖÂê´Â≠óÊØç„ÄÅÊï∞Â≠óÂíå‰∏ãÂàíÁ∫ø');
                    return;
                }

                const userData = {
                    name: name,
                    id: id,
                    bio: bio,
                    avatar: selectedAvatarFile || getUserData().avatar
                };

                saveUserData(userData);
                hideEditModal();
                showToast('ËµÑÊñôÊõ¥Êñ∞ÊàêÂäü');
            }

            // ‰∫ã‰ª∂ÁõëÂê¨
            editProfileBtn.addEventListener('click', showEditModal);
            closeEditModal.addEventListener('click', hideEditModal);
            cancelEdit.addEventListener('click', hideEditModal);
            saveEdit.addEventListener('click', saveProfile);
            
            uploadAvatarBtn.addEventListener('click', () => {
                avatarInput.click();
            });
            
            avatarInput.addEventListener('change', (e) => {
                if (e.target.files && e.target.files[0]) {
                    handleAvatarUpload(e.target.files[0]);
                }
            });

            // ÁÇπÂáªÂºπÁ™óÂ§ñÈÉ®ÂÖ≥Èó≠
            editModal.addEventListener('click', (e) => {
                if (e.target === editModal) {
                    hideEditModal();
                }
            });

            // ÂàùÂßãÂåñÊòæÁ§∫
            updateProfileDisplay();
        }

        // Èí±ÂåÖÂäüËÉΩ - ÁÆÄÊ¥ÅÁâà
        function initWallet() {
            const rechargeBtn = document.getElementById('rechargeBtn');
            const withdrawBtn = document.getElementById('withdrawBtn');
            const walletDetailBtn = document.getElementById('walletDetailBtn');
            const rechargeModal = document.getElementById('rechargeModal');
            const closeRechargeModal = document.getElementById('closeRechargeModal');
            const cancelRecharge = document.getElementById('cancelRecharge');
            const confirmRecharge = document.getElementById('confirmRecharge');
            const amountInput = document.getElementById('amountInput');
            const quickAmounts = document.querySelectorAll('.quick-amount');
            const balanceAmount = document.getElementById('balanceAmount');

            // ÊòæÁ§∫ÂÖÖÂÄºÂºπÁ™ó
            function showRechargeModal() {
                amountInput.value = '';
                quickAmounts.forEach(amount => amount.classList.remove('active'));
                rechargeModal.classList.add('show');
                setTimeout(() => amountInput.focus(), 300);
            }

            // ÈöêËóèÂÖÖÂÄºÂºπÁ™ó
            function hideRechargeModal() {
                rechargeModal.classList.remove('show');
            }

            // Ëé∑Âèñ‰ΩôÈ¢ù
            function getBalance() {
                return parseFloat(localStorage.getItem('walletBalance') || '0.00');
            }

            // Êõ¥Êñ∞‰ΩôÈ¢ùÊòæÁ§∫
            function updateBalanceDisplay() {
                const balance = getBalance();
                balanceAmount.textContent = balance.toFixed(2);
            }

            // Âø´ÈÄüÈáëÈ¢ùÈÄâÊã©
            function handleQuickAmountClick(e) {
                const amount = e.target.getAttribute('data-amount');
                amountInput.value = amount;
                
                // Êõ¥Êñ∞ÈÄâ‰∏≠Áä∂ÊÄÅ
                quickAmounts.forEach(amountEl => amountEl.classList.remove('active'));
                e.target.classList.add('active');
            }

            // ÂÖÖÂÄºÁ°ÆËÆ§
            function confirmRechargeAction() {
                const amount = parseFloat(amountInput.value);
                
                if (!amount || amount <= 0) {
                    showToast('ËØ∑ËæìÂÖ•ÊúâÊïàÁöÑÂÖÖÂÄºÈáëÈ¢ù');
                    return;
                }

                if (amount > 100000) {
                    showToast('ÂçïÊ¨°ÂÖÖÂÄºÈáëÈ¢ù‰∏çËÉΩË∂ÖËøá100,000ÂÖÉ');
                    return;
                }

                const currentBalance = getBalance();
                const newBalance = currentBalance + amount;
                
                localStorage.setItem('walletBalance', newBalance.toFixed(2));
                updateBalanceDisplay();
                hideRechargeModal();
                showToast(`ÂÖÖÂÄºÊàêÂäüÔºÅÂ∑≤ÂÖÖÂÄº ¬•${amount.toFixed(2)}`);
            }

            // ÊèêÁé∞ÂäüËÉΩ
            function handleWithdraw() {
                const currentBalance = getBalance();
                
                if (currentBalance <= 0) {
                    showToast('‰ΩôÈ¢ù‰∏çË∂≥ÔºåÊó†Ê≥ïÊèêÁé∞');
                    return;
                }

                if (confirm(`Á°ÆÂÆöË¶ÅÊèêÁé∞ ¬•${currentBalance.toFixed(2)} ÂêóÔºü`)) {
                    localStorage.setItem('walletBalance', '0.00');
                    updateBalanceDisplay();
                    showToast(`ÊèêÁé∞ÊàêÂäüÔºÅÂ∑≤ÊèêÁé∞ ¬•${currentBalance.toFixed(2)}`);
                }
            }

            // Èõ∂Èí±ÊòéÁªÜ
            function showWalletDetail() {
                showToast('Èõ∂Èí±ÊòéÁªÜÂäüËÉΩÂºÄÂèë‰∏≠...');
            }

            // ‰∫ã‰ª∂ÁõëÂê¨
            rechargeBtn.addEventListener('click', showRechargeModal);
            withdrawBtn.addEventListener('click', handleWithdraw);
            walletDetailBtn.addEventListener('click', showWalletDetail);
            closeRechargeModal.addEventListener('click', hideRechargeModal);
            cancelRecharge.addEventListener('click', hideRechargeModal);
            confirmRecharge.addEventListener('click', confirmRechargeAction);

            quickAmounts.forEach(amount => {
                amount.addEventListener('click', handleQuickAmountClick);
            });

            // ÁÇπÂáªÂºπÁ™óÂ§ñÈÉ®ÂÖ≥Èó≠
            rechargeModal.addEventListener('click', (e) => {
                if (e.target === rechargeModal) {
                    hideRechargeModal();
                }
            });

            // ËæìÂÖ•Ê°ÜÂÆûÊó∂È™åËØÅ
            amountInput.addEventListener('input', (e) => {
                const value = e.target.value;
                if (value && parseFloat(value) > 100000) {
                    e.target.value = '100000';
                }
            });

            // ÂàùÂßãÂåñÊòæÁ§∫
            updateBalanceDisplay();
        }

        // ÂàùÂßãÂåñÈªòËÆ§Áî®Êà∑Êï∞ÊçÆ
        function initDefaultUserData() {
            const existingData = localStorage.getItem('userProfile');
            if (!existingData) {
                const defaultData = {
                    name: 'ÂæÆ‰ø°Áî®Êà∑',
                    id: 'wechat12345',
                    bio: '',
                    avatar: null
                };
                localStorage.setItem('userProfile', JSON.stringify(defaultData));
            }
        }

        // ÂÖ®Â±ÄÊèêÁ§∫ÂáΩÊï∞
        function showToast(message) {
            let toast = document.getElementById('globalToast');
            if (!toast) {
                toast = document.createElement('div');
                toast.id = 'globalToast';
                toast.style.cssText = `
                    position: fixed;
                    top: 50%;
                    left: 50%;
                    transform: translate(-50%, -50%);
                    background: rgba(0,0,0,0.8);
                    color: white;
                    padding: 12px 20px;
                    border-radius: 8px;
                    z-index: 1000;
                    font-size: 14px;
                    transition: opacity 0.3s;
                    opacity: 0;
                `;
                document.body.appendChild(toast);
            }
            
            toast.textContent = message;
            toast.style.opacity = '1';
            
            setTimeout(() => {
                toast.style.opacity = '0';
            }, 2000);
        }

        // ÂàùÂßãÂåñÊâÄÊúâÂäüËÉΩ
        document.addEventListener('DOMContentLoaded', function() {
            initDefaultUserData();
            initProfileEdit();
            initChatDelete();
            initWallet();
        });

        // Á¶ÅÊ≠¢È°µÈù¢Áº©Êîæ
        document.addEventListener('touchmove', (e) => {
            if (e.touches.length > 1) {
                e.preventDefault();
            }
        }, { passive: false });

        // Èò≤Ê≠¢ÂèåÂáªÁº©Êîæ
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
            const now = (new Date()).getTime();
            if (now - lastTouchEnd <= 300) {
                event.preventDefault();
            }
            lastTouchEnd = now;
        }, false);
    </script>

<script>
// Tab switching utility
function showPage(id){
    document.querySelectorAll('.content-page').forEach(function(p){
        p.classList.remove('active');
    });
    var page = document.getElementById(id);
    if(page) page.classList.add('active');

    // update active nav
    document.querySelectorAll('.wechat-bottom-nav .nav-item').forEach(function(n){
        n.classList.remove('active');
    });
    var nav = document.querySelector('.wechat-bottom-nav .nav-item[data-tab="'+id.replace('-page','')+'"]');
    if(nav) nav.classList.add('active');
}

// adapt data-tab values to page IDs
document.querySelectorAll('.wechat-bottom-nav .nav-item').forEach(function(item){
    item.addEventListener('click', function(e){
        var tab = item.getAttribute('data-tab');
        // ripple effect
        var r = item.querySelector('.ripple');
        if(r){
            r.style.left = (e.offsetX - 5) + 'px';
            r.style.top = (e.offsetY - 5) + 'px';
            r.style.opacity = '1';
            r.style.transform = 'scale(0)';
            setTimeout(function(){ r.style.transform = 'scale(6)'; r.style.opacity='0'; }, 10);
        }
        // mapping: data-tab "chat" -> "chat-page", but our elements' ids are named chat-page, contacts-page, discover-page, me-page
        var map = {chat:'chat-page', contacts:'contacts-page', discover:'discover-page', me:'me-page'};
        var target = map[tab] || (tab+'-page');
        showPage(target);
    });
});

// expose showPage by name used elsewhere (if other code calls showPage with 'chat' etc.)
function showPageByTab(tab){
    var map = {chat:'chat-page', contacts:'contacts-page', discover:'discover-page', me:'me-page'};
    showPage(map[tab] || (tab+'-page'));
}

// on load ensure chat-page visible
document.addEventListener('DOMContentLoaded', function(){
    // if chat-page exists, ensure active
    if(document.getElementById('chat-page')) showPage('chat-page');
});
</script>

</body>
</html>